(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"5jQz":function(e,a,t){"use strict";t.r(a),t.d(a,"ActividadesModule",(function(){return M}));var i=t("tyNb"),r=t("M9IT"),c=t("2Vo4"),o=t("qR9t"),n=t("+0xr"),d=t("SZcd"),s=t("fXoL"),l=t("XFpC"),b=t("dNgK"),m=t("0IaG"),u=t("ofXK"),p=t("bTqV"),f=t("Qu3c"),h=t("NFeN"),v=t("Xa2L");function S(e,a){1&e&&s.Ob(0,"div")}function g(e,a){1&e&&(s.Tb(0,"mat-header-cell"),s.zc(1,"Nombre"),s.Sb())}function T(e,a){if(1&e&&(s.Tb(0,"mat-cell"),s.zc(1),s.Sb()),2&e){const e=a.$implicit;s.Bb(1),s.Ac(e.nombre)}}function k(e,a){1&e&&(s.Tb(0,"mat-header-cell"),s.zc(1,"Descripci\xf3n"),s.Sb())}function F(e,a){if(1&e&&(s.Tb(0,"mat-cell"),s.zc(1),s.Sb()),2&e){const e=a.$implicit;s.Bb(1),s.Ac(e.descripcion)}}function x(e,a){1&e&&(s.Tb(0,"mat-header-cell"),s.zc(1,"Desde"),s.Sb())}function A(e,a){if(1&e&&(s.Tb(0,"mat-cell"),s.zc(1),s.fc(2,"date"),s.Sb()),2&e){const e=a.$implicit;s.Bb(1),s.Ac(s.gc(2,1,e.desde))}}function w(e,a){1&e&&(s.Tb(0,"mat-header-cell"),s.zc(1,"Hasta"),s.Sb())}function z(e,a){if(1&e&&(s.Tb(0,"mat-cell"),s.zc(1),s.fc(2,"date"),s.Sb()),2&e){const e=a.$implicit;s.Bb(1),s.Ac(s.gc(2,1,e.hasta))}}function B(e,a){if(1&e){const e=s.Ub();s.Tb(0,"mat-header-cell"),s.Tb(1,"button",19),s.ac("click",(function(){return s.rc(e),s.ec(2).onCreate()})),s.Tb(2,"mat-icon"),s.zc(3,"person_add_alt_1"),s.Sb(),s.Sb(),s.Sb()}}function C(e,a){1&e&&s.Ob(0,"mat-cell")}function O(e,a){if(1&e&&(s.Tb(0,"mat-cell",20),s.Ob(1,"mat-spinner",21),s.Sb()),2&e){const e=s.ec(2);s.Cb("colspan",e.displayedColumns.length)}}function D(e,a){1&e&&s.Ob(0,"mat-header-row")}const y=function(e){return["/actividades/",e]};function I(e,a){1&e&&s.Ob(0,"mat-row",22),2&e&&s.kc("routerLink",s.mc(1,y,a.$implicit.id))}function N(e,a){if(1&e&&(s.Tb(0,"table",6),s.Rb(1,7),s.xc(2,g,2,0,"mat-header-cell",8),s.xc(3,T,2,1,"mat-cell",9),s.Qb(),s.Rb(4,10),s.xc(5,k,2,0,"mat-header-cell",8),s.xc(6,F,2,1,"mat-cell",9),s.Qb(),s.Rb(7,11),s.xc(8,x,2,0,"mat-header-cell",8),s.xc(9,A,3,3,"mat-cell",9),s.Qb(),s.Rb(10,12),s.xc(11,w,2,0,"mat-header-cell",8),s.xc(12,z,3,3,"mat-cell",9),s.Qb(),s.Rb(13,13),s.xc(14,B,4,0,"mat-header-cell",8),s.xc(15,C,1,0,"mat-cell",9),s.Qb(),s.Rb(16,14),s.xc(17,O,2,1,"mat-cell",15),s.Qb(),s.xc(18,D,1,0,"mat-header-row",16),s.xc(19,I,1,3,"mat-row",17),s.Sb(),s.Ob(20,"mat-paginator",18)),2&e){const e=s.ec();s.kc("dataSource",e.dataSource),s.Bb(18),s.kc("matHeaderRowDef",e.displayedColumns),s.Bb(1),s.kc("matRowDefColumns",e.displayedColumns),s.Bb(1),s.kc("pageSizeOptions",e.pageSizeOptions)}}function j(e,a){1&e&&s.Ob(0,"mat-spinner")}function V(e,a){if(1&e){const e=s.Ub();s.Tb(0,"div",25),s.Tb(1,"h3",26),s.zc(2,"No hay actividades."),s.Sb(),s.Tb(3,"button",27),s.ac("click",(function(){return s.rc(e),s.ec(2).onCreate()})),s.Tb(4,"mat-icon"),s.zc(5,"person_add_alt_1"),s.Sb(),s.Sb(),s.Sb()}}function q(e,a){if(1&e&&(s.xc(0,j,1,0,"mat-spinner",23),s.xc(1,V,6,0,"div",24)),2&e){const e=s.ec();s.kc("ngIf",e.loading),s.Bb(1),s.kc("ngIf",!e.loading)}}const R=[{path:"",children:[{path:"",component:(()=>{class e{constructor(e,a,t,i){this.actividadServ=e,this.changeDetectorRef=a,this.snackBar=t,this.dialog=i,this.actividadesSubject=new c.a([]),this.loading=!1,this.pageSizeOptions=[5,10,20],this.displayedColumns=["nombre","descripcion","desde","hasta","actions"],this.actividadesSubject.next([]),this.dataSource=new n.k([])}ngOnInit(){this.loading=!0,this.actividadServ.getActividades().subscribe(e=>this.onSuccess(e),e=>this.onError(e),()=>this.loading=!1)}ngOnDestroy(){this.dataSource&&this.dataSource.disconnect()}onSuccess(e){this.actividadesSubject.next(e),this.changeDataSource(e),this.loading=!1}onError(e){this.actividadesSubject.next([]),this.dataSource&&this.dataSource.disconnect(),this.loading=!1}changeDataSource(e){this.actividadesSubject.next(e),this.changeDetectorRef.detectChanges(),this.dataSource=new n.k(e),this.obs=this.dataSource.connect(),this.dataSource.paginator=this.paginator}onCreate(){let e={id:null,nombre:"",descripcion:"",desde:new Date,hasta:new Date,entradasVendidas:0,obra:null,espacio:null,edicion:null};this.dialog.open(d.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:o.a.crear,data:e}}).afterClosed().subscribe(e=>{let a=e;null!=a&&this.actividadServ.crearActividad(a).subscribe(()=>{this.mostrarMensaje("Se ha creado correctamente la actividad "+a.nombre,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido crear la actividad "+a.nombre,"error")})})}aplicarFiltro(e){null!=this.dataSource.data&&this.dataSource.data.length>0&&(this.dataSource.filter=e.target.value.trim().toLowerCase())}mostrarMensaje(e,a="",t=o.c,i="bottom"){this.snackBar.open(e,"",{duration:t,verticalPosition:i,panelClass:a})}}return e.\u0275fac=function(a){return new(a||e)(s.Nb(l.a),s.Nb(s.h),s.Nb(b.a),s.Nb(m.b))},e.\u0275cmp=s.Hb({type:e,selectors:[["app-actividades"]],viewQuery:function(e,a){var t;1&e&&s.Fc(r.a,!0),2&e&&s.nc(t=s.bc())&&(a.paginator=t.first)},decls:9,vars:5,consts:[[1,"filtro-tabla"],["matInput","","type","text","placeholder","Ingrese busqueda",3,"keyup"],["input",""],[4,"ngIf","ngIfThen","ngIfElse"],["ifBlock",""],["elseBlock",""],["mat-table","","multiTemplateDataRows","",1,"actividad-table","mat-elevation-z8",3,"dataSource"],["matColumnDef","nombre"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","desde"],["matColumnDef","hasta"],["matColumnDef","actions"],["matColumnDef","loading"],["class","loading-cell",4,"matCellDef"],[4,"matHeaderRowDef"],["class","click-row",3,"routerLink",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-mini-fab","","color","primary","matTooltip","Crear Actividad","matTooltipPosition","above","aria-label","Crear Actividad",1,"fab-button",3,"click"],[1,"loading-cell"],["diameter","50"],[1,"click-row",3,"routerLink"],[4,"ngIf"],["class","no-actividad",4,"ngIf"],[1,"no-actividad"],["matLine",""],["color","primary","mat-mini-fab","","aria-label","Crear actividad",3,"click"]],template:function(e,a){if(1&e&&(s.Tb(0,"div",0),s.Tb(1,"input",1,2),s.ac("keyup",(function(e){return a.aplicarFiltro(e)})),s.Sb(),s.Sb(),s.xc(3,S,1,0,"div",3),s.fc(4,"async"),s.xc(5,N,21,4,"ng-template",null,4,s.yc),s.xc(7,q,2,2,"ng-template",null,5,s.yc)),2&e){const e=s.oc(6),i=s.oc(8);var t;const r=(null==(t=s.gc(4,3,a.obs))?null:t.length)>0;s.Bb(3),s.kc("ngIf",r)("ngIfThen",e)("ngIfElse",i)}},directives:[u.n,n.j,n.c,n.e,n.b,n.g,n.i,r.a,n.d,n.a,p.a,f.a,h.a,v.b,n.f,n.h,i.c],pipes:[u.b,u.e],styles:[".no-actividad[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.mat-progress-spinner[_ngcontent-%COMP%]{margin-top:2em}"]}),e})(),pathMatch:"full"},{path:":id",loadChildren:()=>t.e(15).then(t.bind(null,"Owkd")).then(e=>e.ActividadModule),pathMatch:"full",canLoad:[t("I8kz").a],data:{allowedRoles:[o.d.Administrador,o.d.Operador]}}]}];let E=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(a){return new(a||e)},imports:[[i.f.forChild(R)],i.f]}),e})();var L=t("STbY");let M=(()=>{class e{}return e.\u0275mod=s.Lb({type:e}),e.\u0275inj=s.Kb({factory:function(a){return new(a||e)},providers:[],imports:[[E,u.c,n.l,r.c,h.b,m.f,p.b,v.a,f.b,L.a]]}),e})()},SZcd:function(e,a,t){"use strict";t.d(a,"a",(function(){return D}));var i=t("3Pt+"),r=t("0IaG"),c=t("2Vo4"),o=t("fXoL"),n=t("dXND"),d=t("S2lA"),s=t("7B7A"),l=t("kmnG"),b=t("qFsG"),m=t("ofXK"),u=t("iadO"),p=t("d3UM"),f=t("FKr1");function h(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"El campo debe tener al menos 2 caracteres "),o.Sb())}function v(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"El campo debe tener como m\xe1ximo 100 caracteres "),o.Sb())}function S(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"Campo requerido"),o.Sb())}function g(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"El campo debe tener como m\xe1ximo 150 caracteres "),o.Sb())}function T(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"Campo requerido"),o.Sb())}function k(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"Fecha no v\xe1lida"),o.Sb())}function F(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"Fecha no v\xe1lida"),o.Sb())}function x(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"El campo debe ser mayor a 0 "),o.Sb())}function A(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"Campo requerido"),o.Sb())}function w(e,a){if(1&e&&(o.Tb(0,"mat-option",15),o.zc(1),o.Sb()),2&e){const e=a.$implicit;o.kc("value",e),o.Bb(1),o.Bc(" ",e.nombre," ")}}function z(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"Campo requerido"),o.Sb())}function B(e,a){if(1&e&&(o.Tb(0,"mat-option",15),o.zc(1),o.Sb()),2&e){const e=a.$implicit;o.kc("value",e),o.Bb(1),o.Bc(" ",e.nombre," ")}}function C(e,a){1&e&&(o.Tb(0,"mat-error"),o.zc(1,"Campo requerido"),o.Sb())}function O(e,a){if(1&e&&(o.Tb(0,"mat-option",15),o.zc(1),o.Sb()),2&e){const e=a.$implicit;o.kc("value",e),o.Bb(1),o.Bc(" ",e.nombre," ")}}let D=(()=>{class e{constructor(e,a,t,r,o){this.dialogRef=e,this.obraServ=a,this.edicionServ=t,this.espacioServ=r,this.body=o,this.actividadForm=new i.g({id:new i.e(null),nombre:new i.e(""),descripcion:new i.e(""),desde:new i.e(null),hasta:new i.e(null)}),this.actividad=null,this.minDate=new Date,this.espaciosSubject=new c.a([]),this.espaciosObs=this.espaciosSubject.asObservable(),this.obrasSubject=new c.a([]),this.obrasObs=this.obrasSubject.asObservable(),this.edicionesSubject=new c.a([]),this.edicionesObs=this.edicionesSubject.asObservable(),this.actividadForm=new i.g({id:new i.e(null),nombre:new i.e(""),descripcion:new i.e(""),desde:new i.e(null),hasta:new i.e(null),entradasVendidas:new i.e(0),obra:new i.e(null),espacio:new i.e(null),edicion:new i.e(null)}),this.actividad=o.data,this.action=o.action,this.crearActividadForm.id.setValue(this.actividad.id),this.crearActividadForm.nombre.setValue(this.actividad.nombre),this.crearActividadForm.descripcion.setValue(this.actividad.descripcion),this.crearActividadForm.desde.setValue(new Date(this.actividad.desde)),this.crearActividadForm.hasta.setValue(new Date(this.actividad.hasta)),this.crearActividadForm.entradasVendidas.setValue(this.actividad.entradasVendidas),this.crearActividadForm.obra.setValue(this.actividad.obra),this.crearActividadForm.espacio.setValue(this.actividad.espacio),this.crearActividadForm.edicion.setValue(this.actividad.edicion),this.edicionServ.getEdiciones().subscribe(e=>{this.edicionesSubject.next(e)},e=>{this.edicionesSubject.next([])}),this.espacioServ.getEspacios().subscribe(e=>{this.espaciosSubject.next(e)},e=>{this.espaciosSubject.next([])}),this.obraServ.getObras().subscribe(e=>{this.obrasSubject.next(e)},e=>{this.obrasSubject.next([])})}onSubmit(){this.dialogRef.close(this.actividadForm.value)}clean(){this.actividadForm.reset()}get crearActividadForm(){return this.actividadForm.controls}compare(e,a){return null!=e&&null!=a&&e.id==a.id?e:null}}return e.\u0275fac=function(a){return new(a||e)(o.Nb(r.g),o.Nb(n.a),o.Nb(d.a),o.Nb(s.a),o.Nb(r.a))},e.\u0275cmp=o.Hb({type:e,selectors:[["app-form-actividad"]],decls:74,vars:32,consts:[[1,"dialog",3,"formGroup"],["matInput","","type","text","formControlName","nombre","autocomplete","off","maxlength","100","minlength","2","required",""],[4,"ngIf"],["matInput","","type","text","formControlName","descripcion","autocomplete","off","maxlength","150","required",""],["matInput","","type","text","formControlName","desde","autocomplete","off","readonly","","required","",3,"matDatepicker","min"],["matSuffix","",3,"for"],["desdeF",""],["matInput","","type","text","formControlName","hasta","autocomplete","off","readonly","","required","",3,"matDatepicker","min"],["hastaF",""],["matInput","","type","number","formControlName","entradasVendidas","autocomplete","off","min","0","required",""],["formControlName","edicion","required","",3,"compareWith"],[3,"value",4,"ngFor","ngForOf"],["formControlName","espacio","required","",3,"compareWith"],["formControlName","obra",3,"compareWith"],["type","submit",1,"submit-button",3,"mat-dialog-close","disabled","click"],[3,"value"]],template:function(e,a){if(1&e&&(o.Tb(0,"h4"),o.zc(1,"Datos de la actividad"),o.Sb(),o.Tb(2,"mat-dialog-content"),o.Tb(3,"form",0),o.Tb(4,"mat-form-field"),o.Tb(5,"mat-label"),o.zc(6,"Nombre"),o.Sb(),o.Ob(7,"input",1),o.Tb(8,"mat-hint"),o.zc(9,"Nombre"),o.Sb(),o.xc(10,h,2,0,"mat-error",2),o.xc(11,v,2,0,"mat-error",2),o.xc(12,S,2,0,"mat-error",2),o.Sb(),o.Tb(13,"mat-form-field"),o.Tb(14,"mat-label"),o.zc(15,"Descripci\xf3n"),o.Sb(),o.Ob(16,"input",3),o.Tb(17,"mat-hint"),o.zc(18,"Descripci\xf3n"),o.Sb(),o.xc(19,g,2,0,"mat-error",2),o.xc(20,T,2,0,"mat-error",2),o.Sb(),o.Tb(21,"mat-form-field"),o.Ob(22,"input",4),o.Ob(23,"mat-datepicker-toggle",5),o.Ob(24,"mat-datepicker",null,6),o.Tb(26,"mat-hint"),o.zc(27,"Desde"),o.Sb(),o.xc(28,k,2,0,"mat-error",2),o.Sb(),o.Tb(29,"mat-form-field"),o.Ob(30,"input",7),o.Ob(31,"mat-datepicker-toggle",5),o.Ob(32,"mat-datepicker",null,8),o.Tb(34,"mat-hint"),o.zc(35,"Hasta"),o.Sb(),o.xc(36,F,2,0,"mat-error",2),o.Sb(),o.Tb(37,"mat-form-field"),o.Tb(38,"mat-label"),o.zc(39,"Entradas vendidas"),o.Sb(),o.Ob(40,"input",9),o.Tb(41,"mat-hint"),o.zc(42,"Entradas vendidas"),o.Sb(),o.xc(43,x,2,0,"mat-error",2),o.xc(44,A,2,0,"mat-error",2),o.Sb(),o.Tb(45,"mat-form-field"),o.Tb(46,"mat-label"),o.zc(47,"Edici\xf3n"),o.Sb(),o.Tb(48,"mat-select",10),o.xc(49,w,2,2,"mat-option",11),o.fc(50,"async"),o.Sb(),o.Tb(51,"mat-hint"),o.zc(52,"Edici\xf3n"),o.Sb(),o.xc(53,z,2,0,"mat-error",2),o.Sb(),o.Tb(54,"mat-form-field"),o.Tb(55,"mat-label"),o.zc(56,"Espacio"),o.Sb(),o.Tb(57,"mat-select",12),o.xc(58,B,2,2,"mat-option",11),o.fc(59,"async"),o.Sb(),o.Tb(60,"mat-hint"),o.zc(61,"Espacio"),o.Sb(),o.xc(62,C,2,0,"mat-error",2),o.Sb(),o.Tb(63,"mat-form-field"),o.Tb(64,"mat-label"),o.zc(65,"Obra"),o.Sb(),o.Tb(66,"mat-select",13),o.xc(67,O,2,2,"mat-option",11),o.fc(68,"async"),o.Sb(),o.Tb(69,"mat-hint"),o.zc(70,"Obra"),o.Sb(),o.Sb(),o.Sb(),o.Sb(),o.Tb(71,"mat-dialog-actions"),o.Tb(72,"button",14),o.ac("click",(function(){return a.onSubmit()})),o.zc(73," Enviar "),o.Sb(),o.Sb()),2&e){const e=o.oc(25),t=o.oc(33);o.Bb(3),o.kc("formGroup",a.actividadForm),o.Bb(7),o.kc("ngIf",null==a.crearActividadForm.nombre||null==a.crearActividadForm.nombre.errors?null:a.crearActividadForm.nombre.errors.minlength),o.Bb(1),o.kc("ngIf",null==a.crearActividadForm.nombre||null==a.crearActividadForm.nombre.errors?null:a.crearActividadForm.nombre.errors.maxlength),o.Bb(1),o.kc("ngIf",null==a.crearActividadForm.nombre||null==a.crearActividadForm.nombre.errors?null:a.crearActividadForm.nombre.errors.required),o.Bb(7),o.kc("ngIf",null==a.crearActividadForm.descripcion||null==a.crearActividadForm.descripcion.errors?null:a.crearActividadForm.descripcion.errors.maxlength),o.Bb(1),o.kc("ngIf",null==a.crearActividadForm.descripcion||null==a.crearActividadForm.descripcion.errors?null:a.crearActividadForm.descripcion.errors.required),o.Bb(2),o.kc("matDatepicker",e)("min",a.minDate),o.Bb(1),o.kc("for",e),o.Bb(5),o.kc("ngIf",null==a.crearActividadForm.desde||null==a.crearActividadForm.desde.errors?null:a.crearActividadForm.desde.errors.parse),o.Bb(2),o.kc("matDatepicker",t)("min",a.minDate),o.Bb(1),o.kc("for",t),o.Bb(5),o.kc("ngIf",null==a.crearActividadForm.hasta||null==a.crearActividadForm.hasta.errors?null:a.crearActividadForm.hasta.errors.parse),o.Bb(7),o.kc("ngIf",null==a.crearActividadForm.entradasVendidas||null==a.crearActividadForm.entradasVendidas.errors?null:a.crearActividadForm.entradasVendidas.errors.min),o.Bb(1),o.kc("ngIf",null==a.crearActividadForm.entradasVendidas||null==a.crearActividadForm.entradasVendidas.errors?null:a.crearActividadForm.entradasVendidas.errors.required),o.Bb(4),o.kc("compareWith",a.compare),o.Bb(1),o.kc("ngForOf",o.gc(50,26,a.edicionesObs)),o.Bb(4),o.kc("ngIf",null==a.crearActividadForm.edicion||null==a.crearActividadForm.edicion.errors?null:a.crearActividadForm.edicion.errors.required),o.Bb(4),o.kc("compareWith",a.compare),o.Bb(1),o.kc("ngForOf",o.gc(59,28,a.espaciosObs)),o.Bb(4),o.kc("ngIf",null==a.crearActividadForm.espacio||null==a.crearActividadForm.espacio.errors?null:a.crearActividadForm.espacio.errors.required),o.Bb(4),o.kc("compareWith",a.compare),o.Bb(1),o.kc("ngForOf",o.gc(68,30,a.obrasObs)),o.Bb(5),o.kc("mat-dialog-close",a.actividad)("disabled",a.actividadForm.invalid)}},directives:[r.e,i.x,i.q,i.h,l.c,l.g,b.b,i.b,i.p,i.f,i.k,i.l,i.v,l.f,m.n,u.b,u.d,l.h,u.a,i.t,p.a,m.m,r.c,r.d,l.b,f.n],pipes:[m.b],styles:[""]}),e})()}}]);