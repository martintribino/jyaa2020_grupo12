(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Owkd:function(t,a,i){"use strict";i.r(a),i.d(a,"ActividadModule",(function(){return N}));var c=i("tyNb"),n=i("qR9t"),r=i("2Vo4"),e=i("SZcd"),d=i("fXoL"),o=i("lGQG"),s=i("XFpC"),l=i("dNgK"),b=i("0IaG"),m=i("ofXK"),u=i("Wp6s"),f=i("f0Cb"),g=i("bTqV"),p=i("Qu3c"),h=i("NFeN"),v=i("Xa2L");function x(t,a){1&t&&d.Ob(0,"div")}function S(t,a){if(1&t&&(d.Tb(0,"div"),d.Tb(1,"div",4),d.Tb(2,"strong"),d.zc(3,"Edici\xf3n"),d.Sb(),d.Sb(),d.Tb(4,"div",4),d.Tb(5,"span"),d.zc(6),d.fc(7,"async"),d.fc(8,"date"),d.fc(9,"async"),d.fc(10,"date"),d.fc(11,"async"),d.Sb(),d.Sb(),d.Ob(12,"mat-divider"),d.Sb()),2&t){const t=d.ec(2);var i=null;d.Bb(6),d.Dc("",null==(i=d.gc(7,3,t.actividad))?null:i.edicion.nombre," (",d.gc(8,5,null==(i=d.gc(9,7,t.actividad))?null:i.edicion.desde)," - ",d.gc(10,9,null==(i=d.gc(11,11,t.actividad))?null:i.edicion.hasta),")")}}function T(t,a){if(1&t&&(d.Tb(0,"div"),d.Tb(1,"div",4),d.Tb(2,"strong"),d.zc(3,"Espacio"),d.Sb(),d.Sb(),d.Tb(4,"div",4),d.Tb(5,"span"),d.zc(6),d.fc(7,"async"),d.fc(8,"async"),d.Sb(),d.Sb(),d.Ob(9,"mat-divider"),d.Sb()),2&t){const t=d.ec(2);var i=null;d.Bb(6),d.Cc("",null==(i=d.gc(7,2,t.actividad))?null:i.espacio.nombre," (",null==(i=d.gc(8,4,t.actividad))?null:i.espacio.capacidad,")")}}function y(t,a){if(1&t&&(d.Tb(0,"div"),d.Tb(1,"div",4),d.Tb(2,"strong"),d.zc(3,"Obra"),d.Sb(),d.Sb(),d.Tb(4,"div",4),d.Tb(5,"span"),d.zc(6),d.fc(7,"async"),d.fc(8,"async"),d.Sb(),d.Sb(),d.Ob(9,"mat-divider"),d.Sb()),2&t){const t=d.ec(2);var i=null;d.Bb(6),d.Cc("",null==(i=d.gc(7,2,t.actividad))?null:i.obra.nombre," (",null==(i=d.gc(8,4,t.actividad))?null:i.obra.duracion,")")}}function w(t,a){1&t&&d.Ob(0,"div")}function k(t,a){if(1&t){const t=d.Ub();d.Tb(0,"button",9),d.ac("click",(function(){return d.rc(t),d.ec(2).onEdit()})),d.Tb(1,"mat-icon"),d.zc(2,"edit"),d.Sb(),d.Sb(),d.Tb(3,"button",10),d.ac("click",(function(){return d.rc(t),d.ec(2).onDelete()})),d.Tb(4,"mat-icon"),d.zc(5,"delete"),d.Sb(),d.Sb()}if(2&t){const t=d.ec(2);d.kc("disabled",t.loading),d.Bb(3),d.kc("disabled",t.loading)}}const A=function(){return["/actividades/"]};function z(t,a){if(1&t&&(d.Tb(0,"mat-card",3),d.Tb(1,"mat-card-header"),d.Tb(2,"mat-card-title"),d.zc(3),d.fc(4,"async"),d.Sb(),d.Sb(),d.Tb(5,"mat-card-content"),d.Tb(6,"div",4),d.Tb(7,"strong"),d.zc(8,"Descripci\xf3n"),d.Sb(),d.Tb(9,"span"),d.zc(10),d.fc(11,"async"),d.Sb(),d.Sb(),d.Ob(12,"mat-divider"),d.Tb(13,"div",4),d.Tb(14,"strong"),d.zc(15,"Desde"),d.Sb(),d.Tb(16,"span"),d.zc(17),d.fc(18,"date"),d.fc(19,"async"),d.Sb(),d.Sb(),d.Ob(20,"mat-divider"),d.Tb(21,"div",4),d.Tb(22,"strong"),d.zc(23,"Hasta"),d.Sb(),d.Tb(24,"span"),d.zc(25),d.fc(26,"date"),d.fc(27,"async"),d.Sb(),d.Sb(),d.Ob(28,"mat-divider"),d.Tb(29,"div",4),d.Tb(30,"strong"),d.zc(31,"Entradas Vendidas"),d.Sb(),d.Tb(32,"span"),d.zc(33),d.fc(34,"number"),d.fc(35,"async"),d.Sb(),d.Sb(),d.Ob(36,"mat-divider"),d.xc(37,S,13,13,"div",5),d.fc(38,"async"),d.xc(39,T,10,6,"div",5),d.fc(40,"async"),d.xc(41,y,10,6,"div",5),d.fc(42,"async"),d.Sb(),d.Tb(43,"mat-card-actions"),d.Tb(44,"button",6),d.Tb(45,"mat-icon"),d.zc(46,"arrow_back_ios"),d.Sb(),d.Sb(),d.xc(47,w,1,0,"div",7),d.xc(48,k,6,2,"ng-template",null,8,d.yc),d.Sb(),d.Sb()),2&t){const t=d.oc(49),a=d.ec();var i,c,n,r,e,o;const b=null!=(null==(o=d.gc(38,27,a.actividad))?null:o.edicion);var s;const m=null!=(null==(s=d.gc(40,29,a.actividad))?null:s.espacio);var l;const u=null!=(null==(l=d.gc(42,31,a.actividad))?null:l.obra);d.Bb(3),d.Ac(null==(i=d.gc(4,11,a.actividad))?null:i.nombre),d.Bb(7),d.Ac(null==(c=d.gc(11,13,a.actividad))?null:c.descripcion),d.Bb(7),d.Ac(d.gc(18,15,null==(n=d.gc(19,17,a.actividad))?null:n.desde)),d.Bb(8),d.Ac(d.gc(26,19,null==(r=d.gc(27,21,a.actividad))?null:r.hasta)),d.Bb(8),d.Ac(d.gc(34,23,null==(e=d.gc(35,25,a.actividad))?null:e.entradasVendidas)),d.Bb(4),d.kc("ngIf",b),d.Bb(2),d.kc("ngIf",m),d.Bb(2),d.kc("ngIf",u),d.Bb(3),d.kc("routerLink",d.lc(33,A)),d.Bb(3),d.kc("ngIf",a.isAdmin())("ngIfThen",t)}}function I(t,a){1&t&&d.Ob(0,"mat-spinner")}function C(t,a){1&t&&(d.Tb(0,"h5"),d.zc(1,"No se pudo cargar la actividad."),d.Sb())}function B(t,a){if(1&t&&(d.xc(0,I,1,0,"mat-spinner",5),d.xc(1,C,2,0,"h5",5)),2&t){const t=d.ec();d.kc("ngIf",t.loading),d.Bb(1),d.kc("ngIf",!t.loading)}}const j=[{path:"",component:(()=>{class t{constructor(t,a,i,c,n,e){this.authService=t,this.actividadServ=a,this.snackBar=i,this.dialog=c,this.router=n,this.route=e,this.actividadSubject=new r.a(null),this.actividad=this.actividadSubject.asObservable(),this.loading=!1,this.id=null,this.route.params.subscribe(t=>{this.id=parseInt(t.id)})}ngOnInit(){this.loading=!0,this.actividadServ.getActividad(this.id).subscribe(t=>this.onSuccess(t),t=>this.onError(t),()=>this.loading=!1)}onSuccess(t){this.actividadSubject.next(t),this.loading=!1}onError(t){this.actividadSubject.next(null),this.loading=!1}onEdit(){let t=this.actividadSubject.value;null!=t&&this.dialog.open(e.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:n.a.editar,data:t}}).afterClosed().subscribe(t=>{let a=t;null!=a&&this.actividadServ.actualizarActividad(a).subscribe(()=>{this.mostrarMensaje("Se ha editado correctamente la actividad "+a.nombre,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido actualizar la actividad "+a.nombre,"error")})})}onDelete(){let t=this.actividadSubject.value;null!=t&&(this.loading=!0,this.actividadServ.eliminarActividad(t).subscribe(()=>{this.mostrarMensaje("Se ha dado de baja correctamente la actividad "+t.nombre,"success"),this.router.navigate(["/actividades"])},()=>{this.mostrarMensaje("No se ha podido dar de baja la actividad "+t.nombre,"error"),this.loading=!1},()=>{this.loading=!1}))}mostrarMensaje(t,a="",i=n.c,c="bottom"){this.snackBar.open(t,"",{duration:i,verticalPosition:c,panelClass:a})}isAdmin(){let t=this.authService.getUsuario();return null!=t&&t.rol==n.d.Administrador}}return t.\u0275fac=function(a){return new(a||t)(d.Nb(o.a),d.Nb(s.a),d.Nb(l.a),d.Nb(b.b),d.Nb(c.b),d.Nb(c.a))},t.\u0275cmp=d.Hb({type:t,selectors:[["app-actividad"]],decls:6,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["ifBlock",""],["elseBlock",""],[1,"default-card"],[1,"card-row"],[4,"ngIf"],["mat-icon-button","","matTooltip","Volver","matTooltipPosition","below","aria-label","Volver",1,"row-profile-button",3,"routerLink"],[4,"ngIf","ngIfThen"],["ifAdminBlock",""],["mat-icon-button","","matTooltip","Editar Actividad","matTooltipPosition","below","aria-label","Editar Actividad",1,"row-profile-button",3,"disabled","click"],["mat-icon-button","","matTooltip","Eliminar Actividad","matTooltipPosition","below","aria-label","Eliminar Actividad",1,"row-profile-button",3,"disabled","click"]],template:function(t,a){if(1&t&&(d.xc(0,x,1,0,"div",0),d.fc(1,"async"),d.xc(2,z,50,34,"ng-template",null,1,d.yc),d.xc(4,B,2,2,"ng-template",null,2,d.yc)),2&t){const t=d.oc(3),i=d.oc(5);d.kc("ngIf",null!=d.gc(1,3,a.actividad))("ngIfThen",t)("ngIfElse",i)}},directives:[m.n,u.a,u.d,u.h,u.c,f.a,u.b,g.a,p.a,c.c,h.a,v.b],pipes:[m.b,m.e,m.f],styles:[".mat-progress-spinner[_ngcontent-%COMP%]{margin-top:2em}"]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(a){return new(a||t)},imports:[[c.f.forChild(j)],c.f]}),t})();var E=i("ugYk");let N=(()=>{class t{}return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(a){return new(a||t)},providers:[],imports:[[O,E.a,m.c,u.f,f.b,h.b,g.b,b.f,p.b,l.b,v.a]]}),t})()},Wp6s:function(t,a,i){"use strict";i.d(a,"a",(function(){return g})),i.d(a,"b",(function(){return u})),i.d(a,"c",(function(){return l})),i.d(a,"d",(function(){return p})),i.d(a,"e",(function(){return f})),i.d(a,"f",(function(){return h})),i.d(a,"g",(function(){return m})),i.d(a,"h",(function(){return b}));var c=i("R1ws"),n=i("FKr1"),r=i("fXoL");const e=["*",[["mat-card-footer"]]],d=["*","mat-card-footer"],o=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],s=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let l=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=r.Ib({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=r.Ib({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),m=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=r.Ib({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),t})(),u=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=r.Ib({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,a){2&t&&r.Eb("mat-card-actions-align-end","end"===a.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=r.Ib({type:t,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-card-image"]}),t})(),g=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(a){return new(a||t)(r.Nb(c.a,8))},t.\u0275cmp=r.Hb({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,a){2&t&&r.Eb("_mat-animation-noopable","NoopAnimations"===a._animationMode)},exportAs:["matCard"],ngContentSelectors:d,decls:2,vars:0,template:function(t,a){1&t&&(r.jc(e),r.ic(0),r.ic(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),p=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=r.Hb({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:s,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,a){1&t&&(r.jc(o),r.ic(0),r.Tb(1,"div",0),r.ic(2,1),r.Sb(),r.ic(3,2))},encapsulation:2,changeDetection:0}),t})(),h=(()=>{class t{}return t.\u0275mod=r.Lb({type:t}),t.\u0275inj=r.Kb({factory:function(a){return new(a||t)},imports:[[n.i],n.i]}),t})()}}]);