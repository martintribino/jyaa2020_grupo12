(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{exkq:function(t,e,r){"use strict";r.r(e),r.d(e,"ArtistasModule",(function(){return H}));var a=r("tyNb"),o=r("M9IT"),i=r("qR9t"),n=r("+0xr"),c=r("2Vo4"),l=r("wimQ"),s=r("fXoL"),m=r("gOGa"),b=r("dXND"),u=r("dNgK"),d=r("0IaG"),f=r("n3We"),h=r("ofXK"),p=r("bTqV"),g=r("Qu3c"),A=r("NFeN"),y=r("Xa2L");function S(t,e){1&t&&s.Pb(0,"div")}function T(t,e){1&t&&(s.Ub(0,"mat-header-cell"),s.Ub(1,"h2"),s.Ac(2,"Artistas"),s.Tb(),s.Tb())}function w(t,e){if(1&t){const t=s.Vb();s.Ub(0,"mat-header-cell",18),s.Ub(1,"button",19),s.bc("click",(function(){return s.sc(t),s.fc(2).onCreate()})),s.Ub(2,"mat-icon"),s.Ac(3,"person_add_alt_1"),s.Tb(),s.Tb(),s.Tb()}}function F(t,e){1&t&&(s.Ub(0,"mat-header-cell"),s.Ac(1,"Nombre"),s.Tb())}function C(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Ac(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Bc(t.nombre)}}function U(t,e){1&t&&(s.Ub(0,"mat-header-cell"),s.Ac(1,"Apellido"),s.Tb())}function I(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Ac(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Bc(t.apellido)}}function B(t,e){1&t&&(s.Ub(0,"mat-header-cell"),s.Ac(1,"Apodo"),s.Tb())}function v(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Ac(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Bc(t.apodo)}}function O(t,e){1&t&&(s.Ub(0,"mat-header-cell"),s.Ac(1,"Obras"),s.Tb())}function x(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Ac(1),s.Tb()),2&t){const t=e.$implicit,r=s.fc(2);s.Bb(1),s.Bc(r.getObras(t.obras,2))}}function q(t,e){1&t&&(s.Ub(0,"mat-header-cell"),s.Ac(1,"Etiquetas"),s.Tb())}function D(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Ac(1),s.Tb()),2&t){const t=e.$implicit,r=s.fc(2);s.Bb(1),s.Bc(r.getEtiquetas(t.etiquetas,2))}}function k(t,e){1&t&&s.Pb(0,"mat-header-row")}function P(t,e){1&t&&s.Pb(0,"mat-header-row")}const R=function(t){return["/artistas/",t]};function E(t,e){1&t&&s.Pb(0,"mat-row",20),2&t&&s.lc("routerLink",s.nc(1,R,e.$implicit.id))}function N(t,e){if(1&t&&(s.Ub(0,"table",4),s.Sb(1,5),s.yc(2,T,3,0,"mat-header-cell",6),s.Rb(),s.Sb(3,7),s.yc(4,w,4,0,"mat-header-cell",8),s.Rb(),s.Sb(5,9),s.yc(6,F,2,0,"mat-header-cell",6),s.yc(7,C,2,1,"mat-cell",10),s.Rb(),s.Sb(8,11),s.yc(9,U,2,0,"mat-header-cell",6),s.yc(10,I,2,1,"mat-cell",10),s.Rb(),s.Sb(11,12),s.yc(12,B,2,0,"mat-header-cell",6),s.yc(13,v,2,1,"mat-cell",10),s.Rb(),s.Sb(14,13),s.yc(15,O,2,0,"mat-header-cell",6),s.yc(16,x,2,1,"mat-cell",10),s.Rb(),s.Sb(17,14),s.yc(18,q,2,0,"mat-header-cell",6),s.yc(19,D,2,1,"mat-cell",10),s.Rb(),s.yc(20,k,1,0,"mat-header-row",15),s.yc(21,P,1,0,"mat-header-row",15),s.yc(22,E,1,3,"mat-row",16),s.Tb(),s.Pb(23,"mat-paginator",17)),2&t){const t=s.fc();s.lc("dataSource",t.dataSource),s.Bb(20),s.lc("matHeaderRowDef",t.displayTitleCol),s.Bb(1),s.lc("matHeaderRowDef",t.displayedColumns),s.Bb(1),s.lc("matRowDefColumns",t.displayedColumns),s.Bb(1),s.lc("pageSizeOptions",t.pageSizeOptions)}}function L(t,e){1&t&&s.Pb(0,"mat-spinner")}function j(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",23),s.Ub(1,"h3",24),s.Ac(2,"No hay artistas."),s.Tb(),s.Ub(3,"button",25),s.bc("click",(function(){return s.sc(t),s.fc(2).onCreate()})),s.Ub(4,"mat-icon"),s.Ac(5,"person_add_alt_1"),s.Tb(),s.Tb(),s.Tb()}}function M(t,e){if(1&t&&(s.yc(0,L,1,0,"mat-spinner",21),s.yc(1,j,6,0,"div",22)),2&t){const t=s.fc();s.lc("ngIf",t.loading),s.Bb(1),s.lc("ngIf",!t.loading)}}const V=[{path:"",children:[{path:"",component:(()=>{class t{constructor(t,e,r,a,o){this.artistaServ=t,this.changeDetectorRef=e,this.obraServ=r,this.snackBar=a,this.dialog=o,this.artistasSubject=new c.a([]),this.obrasSubject=new c.a([]),this.obras=this.obrasSubject.asObservable(),this.id=null,this.loading=!1,this.pageSizeOptions=[5,10,20],this.displayTitleCol=["titulo","action"],this.displayedColumns=["nombre","apellido","apodo","obras","etiquetas"],this.searchColumns=["nombre","apellido","apodo","etiquetas","obras"],this.searchSelectedColumns=this.searchColumns,this.predicateFn=(t,e)=>{for(const[a,o]of Object.entries(t))if(this.searchSelectedColumns.includes(a)&&("string"==typeof o&&-1!=o.toLowerCase().indexOf(e)||"number"==typeof o&&-1!=o.toString().indexOf(e)))return!0;var r="";return!(!this.searchSelectedColumns.includes("obras")||(t.obras.map(t=>{r+=""+t.nombre}),-1==r.toLowerCase().indexOf(e)))||!(!this.searchSelectedColumns.includes("etiquetas")||(r="",t.etiquetas.map(t=>{r+=""+t.nombre}),-1==r.toLowerCase().indexOf(e)))},this.artistasSubject.next([]),this.dataSource=new n.k([])}set matPaginator(t){this.dataSource.paginator=t}ngOnInit(){this.loading=!0,this.artistaServ.getArtistas().subscribe(t=>this.onSuccess(t),t=>this.onError(t),()=>this.loading=!1)}ngAfterViewInit(){}ngOnDestroy(){this.dataSource&&this.dataSource.disconnect()}onSuccess(t){t.map(t=>{this.obraServ.getObrasPorArtista(t.id).subscribe(e=>{t.obras=e},t=>{})}),this.changeDataSource(t),this.loading=!1}onError(t){this.artistasSubject.next([]),this.dataSource&&this.dataSource.disconnect(),this.loading=!1}changeDataSource(t){this.artistasSubject.next(t),this.changeDetectorRef.detectChanges(),this.dataSource=new n.k(t),this.dataSource.filterPredicate=this.predicateFn,this.obs=this.dataSource.connect()}getObras(t,e,r=", "){let a="",o=!0;return null==t||0==t.length?"No hay obras.":(t.forEach(t=>{let e=o?"":r;o=!1,a+=`${e}${t.nombre}`}),a)}getEtiquetas(t,e,r=", "){let a="",o=!0;return null==t||0==t.length?"No hay etiquetas.":(t.forEach(t=>{let e=o?"":r;o=!1,a+=`${e}${t.nombre}`}),a)}onCreate(){this.dialog.open(l.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:i.a.crear,data:{id:null,nombre:"",apellido:"",apodo:"",fotos:[],etiquetas:[],usuariosFav:[]}}}).afterClosed().subscribe(t=>{let e=t;null!=e&&this.artistaServ.crearArtista(e).subscribe(()=>{this.mostrarMensaje("Se ha creado correctamente el artista "+e.nombre,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido crear el artista "+e.nombre,"error")})})}onFilterSearch(t){this.searchSelectedColumns=t.campos,null!=this.dataSource.data&&this.dataSource.data.length>0&&(this.dataSource.filter=t.filtro.trim().toLowerCase())}mostrarMensaje(t,e="",r=i.d,a="bottom"){this.snackBar.open(t,"",{duration:r,verticalPosition:a,panelClass:e})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(m.a),s.Ob(s.h),s.Ob(b.a),s.Ob(u.a),s.Ob(d.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-artistas"]],viewQuery:function(t,e){var r;1&t&&s.Gc(o.a,!0),2&t&&s.oc(r=s.cc())&&(e.matPaginator=r.first)},decls:7,vars:6,consts:[[3,"searchFields","filterSearch"],[4,"ngIf","ngIfThen","ngIfElse"],["ifBlock",""],["elseBlock",""],["mat-table","","multiTemplateDataRows","",1,"artista-table","mat-elevation-z8",3,"dataSource"],["matColumnDef","titulo"],[4,"matHeaderCellDef"],["matColumnDef","action"],["class","add-cell",4,"matHeaderCellDef"],["matColumnDef","nombre"],[4,"matCellDef"],["matColumnDef","apellido"],["matColumnDef","apodo"],["matColumnDef","obras"],["matColumnDef","etiquetas"],[4,"matHeaderRowDef"],["class","click-row",3,"routerLink",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],[1,"add-cell"],["mat-mini-fab","","color","primary","matTooltip","Crear Artista","matTooltipPosition","above","aria-label","Crear Artista",1,"fab-button",3,"click"],[1,"click-row",3,"routerLink"],[4,"ngIf"],["class","no-artista",4,"ngIf"],[1,"no-artista"],["matLine",""],["color","primary","mat-mini-fab","","aria-label","Crear artista",3,"click"]],template:function(t,e){if(1&t&&(s.Ub(0,"app-filtro-tabla",0),s.bc("filterSearch",(function(t){return e.onFilterSearch(t)})),s.Tb(),s.yc(1,S,1,0,"div",1),s.gc(2,"async"),s.yc(3,N,24,5,"ng-template",null,2,s.zc),s.yc(5,M,2,2,"ng-template",null,3,s.zc)),2&t){const t=s.pc(4),a=s.pc(6);var r;const o=(null==(r=s.hc(2,4,e.obs))?null:r.length)>0;s.lc("searchFields",e.searchColumns),s.Bb(1),s.lc("ngIf",o)("ngIfThen",t)("ngIfElse",a)}},directives:[f.a,h.n,n.j,n.c,n.e,n.b,n.g,n.i,o.a,n.d,p.a,g.a,A.a,n.a,n.f,n.h,a.c,y.b],pipes:[h.b],styles:[".no-artista[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.mat-progress-spinner[_ngcontent-%COMP%]{margin-top:2em}"]}),t})(),pathMatch:"full"},{path:":id",loadChildren:()=>Promise.all([r.e(3),r.e(0),r.e(21)]).then(r.bind(null,"ARp9")).then(t=>t.ArtistaModule),pathMatch:"full",canLoad:[r("I8kz").a],data:{allowedRoles:[i.e.Administrador,i.e.Participante]}}]}];let $=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(V)],a.f]}),t})();var z=r("STbY"),G=r("OLjN"),_=r("3Pt+");let H=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},providers:[],imports:[[$,h.c,n.l,o.c,A.b,d.f,p.b,y.a,g.b,z.a,_.k,_.v,G.a]]}),t})()},wimQ:function(t,e,r){"use strict";r.d(e,"a",(function(){return A}));var a=r("3Pt+"),o=r("0IaG"),i=r("fXoL"),n=r("kmnG"),c=r("qFsG"),l=r("ofXK");function s(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"El campo debe tener al menos 2 caracteres "),i.Tb())}function m(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"El campo debe tener como m\xe1ximo 100 caracteres "),i.Tb())}function b(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"Campo requerido"),i.Tb())}function u(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"El campo debe tener al menos 2 caracteres "),i.Tb())}function d(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"El campo debe tener como m\xe1ximo 100 caracteres "),i.Tb())}function f(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"Campo requerido"),i.Tb())}function h(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"El campo debe tener al menos 2 caracteres "),i.Tb())}function p(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"El campo debe tener como m\xe1ximo 50 caracteres "),i.Tb())}function g(t,e){1&t&&(i.Ub(0,"mat-error"),i.Ac(1,"Campo requerido"),i.Tb())}let A=(()=>{class t{constructor(t,e){this.dialogRef=t,this.body=e,this.artistaForm=new a.h({id:new a.e(""),nombre:new a.e(""),apellido:new a.e(""),apodo:new a.e(""),fotos:new a.e([])}),this.artista=null,this.artistaForm=new a.h({id:new a.e(""),nombre:new a.e(""),apellido:new a.e(""),apodo:new a.e(""),fotos:new a.e([])}),this.artista=e.data,this.action=e.action,this.crearArtistaForm.id.setValue(this.artista.id),this.crearArtistaForm.nombre.setValue(this.artista.nombre),this.crearArtistaForm.apellido.setValue(this.artista.apellido),this.crearArtistaForm.apodo.setValue(this.artista.apodo),this.crearArtistaForm.fotos.setValue(this.artista.fotos)}onSubmit(){this.dialogRef.close(this.artistaForm.value)}clean(){this.artistaForm.reset()}get crearArtistaForm(){return this.artistaForm.controls}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(o.g),i.Ob(o.a))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-form-artista"]],decls:34,vars:12,consts:[[1,"dialog",3,"formGroup"],["matInput","","type","text","formControlName","nombre","autocomplete","off","maxlength","100","minlength","2","required",""],[4,"ngIf"],["matInput","","type","text","formControlName","apellido","autocomplete","off","maxlength","100","minlength","2","required",""],["matInput","","type","text","formControlName","apodo","autocomplete","off","maxlength","50","minlength","2","required",""],["type","submit",1,"submit-button",3,"mat-dialog-close","disabled","click"]],template:function(t,e){1&t&&(i.Ub(0,"h4"),i.Ac(1,"Datos del artista"),i.Tb(),i.Ub(2,"mat-dialog-content"),i.Ub(3,"form",0),i.Ub(4,"mat-form-field"),i.Ub(5,"mat-label"),i.Ac(6,"Nombre"),i.Tb(),i.Pb(7,"input",1),i.Ub(8,"mat-hint"),i.Ac(9,"Nombre"),i.Tb(),i.yc(10,s,2,0,"mat-error",2),i.yc(11,m,2,0,"mat-error",2),i.yc(12,b,2,0,"mat-error",2),i.Tb(),i.Ub(13,"mat-form-field"),i.Ub(14,"mat-label"),i.Ac(15,"Apellido"),i.Tb(),i.Pb(16,"input",3),i.Ub(17,"mat-hint"),i.Ac(18,"Apellido"),i.Tb(),i.yc(19,u,2,0,"mat-error",2),i.yc(20,d,2,0,"mat-error",2),i.yc(21,f,2,0,"mat-error",2),i.Tb(),i.Ub(22,"mat-form-field"),i.Ub(23,"mat-label"),i.Ac(24,"Apodo"),i.Tb(),i.Pb(25,"input",4),i.Ub(26,"mat-hint"),i.Ac(27,"Apodo"),i.Tb(),i.yc(28,h,2,0,"mat-error",2),i.yc(29,p,2,0,"mat-error",2),i.yc(30,g,2,0,"mat-error",2),i.Tb(),i.Tb(),i.Tb(),i.Ub(31,"mat-dialog-actions"),i.Ub(32,"button",5),i.bc("click",(function(){return e.onSubmit()})),i.Ac(33," Enviar "),i.Tb(),i.Tb()),2&t&&(i.Bb(3),i.lc("formGroup",e.artistaForm),i.Bb(7),i.lc("ngIf",null==e.crearArtistaForm.nombre||null==e.crearArtistaForm.nombre.errors?null:e.crearArtistaForm.nombre.errors.minlength),i.Bb(1),i.lc("ngIf",null==e.crearArtistaForm.nombre||null==e.crearArtistaForm.nombre.errors?null:e.crearArtistaForm.nombre.errors.maxlength),i.Bb(1),i.lc("ngIf",null==e.crearArtistaForm.nombre||null==e.crearArtistaForm.nombre.errors?null:e.crearArtistaForm.nombre.errors.required),i.Bb(7),i.lc("ngIf",null==e.crearArtistaForm.apellido||null==e.crearArtistaForm.apellido.errors?null:e.crearArtistaForm.apellido.errors.minlength),i.Bb(1),i.lc("ngIf",null==e.crearArtistaForm.apellido||null==e.crearArtistaForm.apellido.errors?null:e.crearArtistaForm.apellido.errors.maxlength),i.Bb(1),i.lc("ngIf",null==e.crearArtistaForm.apellido||null==e.crearArtistaForm.apellido.errors?null:e.crearArtistaForm.apellido.errors.required),i.Bb(7),i.lc("ngIf",null==e.crearArtistaForm.apodo||null==e.crearArtistaForm.apodo.errors?null:e.crearArtistaForm.apodo.errors.minlength),i.Bb(1),i.lc("ngIf",null==e.crearArtistaForm.apodo||null==e.crearArtistaForm.apodo.errors?null:e.crearArtistaForm.apodo.errors.maxlength),i.Bb(1),i.lc("ngIf",null==e.crearArtistaForm.apodo||null==e.crearArtistaForm.apodo.errors?null:e.crearArtistaForm.apodo.errors.required),i.Bb(2),i.lc("mat-dialog-close",e.artista)("disabled",e.artistaForm.invalid))},directives:[o.e,a.y,a.r,a.i,n.c,n.g,c.b,a.b,a.q,a.g,a.l,a.m,a.w,n.f,l.n,o.c,o.d,n.b],styles:[""]}),t})()}}]);