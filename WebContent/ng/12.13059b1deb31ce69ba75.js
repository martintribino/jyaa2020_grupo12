(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{ITA0:function(t,a,i){"use strict";i.r(a),i.d(a,"EspacioModule",(function(){return M}));var e=i("tyNb"),n=i("2Vo4"),c=i("qR9t"),r=i("YsU4"),o=i("fCl4"),s=i("fXoL"),l=i("lGQG"),d=i("7B7A"),b=i("dNgK"),u=i("0IaG"),m=i("ofXK"),p=i("Wp6s"),g=i("f0Cb"),h=i("bTqV"),f=i("Qu3c"),v=i("NFeN"),x=i("m1IW"),T=i("Xa2L");function y(t,a){1&t&&s.Pb(0,"div")}function U(t,a){1&t&&s.Pb(0,"div")}function A(t,a){if(1&t){const t=s.Vb();s.Ub(0,"div",4),s.Ub(1,"strong"),s.Ac(2,"Ubicaci\xf3n"),s.Tb(),s.Tb(),s.Ub(3,"div",4),s.Ub(4,"strong"),s.Ac(5,"Calle"),s.Tb(),s.Ub(6,"span"),s.Ac(7),s.gc(8,"async"),s.Tb(),s.Tb(),s.Pb(9,"mat-divider"),s.Ub(10,"div",4),s.Ub(11,"strong"),s.Ac(12,"Ciudad"),s.Tb(),s.Ub(13,"span"),s.Ac(14),s.gc(15,"async"),s.Tb(),s.Tb(),s.Pb(16,"mat-divider"),s.Ub(17,"div",4),s.Ub(18,"strong"),s.Ac(19,"Estado"),s.Tb(),s.Ub(20,"span"),s.Ac(21),s.gc(22,"async"),s.Tb(),s.Tb(),s.Pb(23,"mat-divider"),s.Ub(24,"div",4),s.Ub(25,"strong"),s.Ac(26,"C\xf3digo Postal"),s.Tb(),s.Ub(27,"span"),s.Ac(28),s.gc(29,"async"),s.Tb(),s.Tb(),s.Pb(30,"mat-divider"),s.Ub(31,"app-etiquetas-entidad",9),s.bc("agregar",(function(a){return s.sc(t),s.fc(2).agregarEtiqueta(a)}))("eliminar",(function(a){return s.sc(t),s.fc(2).eliminarEtiqueta(a)})),s.gc(32,"async"),s.Tb()}if(2&t){const t=s.fc(2);var i,e,n,c,r;const a=null==(r=s.hc(32,14,t.espacio))?null:r.etiquetas;s.Bb(7),s.Bc(null==(i=s.hc(8,6,t.espacio))||null==i.direccion?null:i.direccion.calle),s.Bb(7),s.Bc(null==(e=s.hc(15,8,t.espacio))||null==e.direccion?null:e.direccion.ciudad),s.Bb(7),s.Bc(null==(n=s.hc(22,10,t.espacio))||null==n.direccion?null:n.direccion.estado),s.Bb(7),s.Bc(null==(c=s.hc(29,12,t.espacio))||null==c.direccion?null:c.direccion.codigoPostal),s.Bb(3),s.lc("etiquetas",a)("loading",t.loading)}}function w(t,a){1&t&&s.Pb(0,"div")}function B(t,a){if(1&t){const t=s.Vb();s.Ub(0,"button",10),s.bc("click",(function(){return s.sc(t),s.fc(2).onEdit()})),s.Ub(1,"mat-icon"),s.Ac(2,"edit"),s.Tb(),s.Tb(),s.Ub(3,"button",11),s.bc("click",(function(){return s.sc(t),s.fc(2).onConfirmDelete()})),s.Ub(4,"mat-icon"),s.Ac(5,"delete"),s.Tb(),s.Tb()}if(2&t){const t=s.fc(2);s.lc("disabled",t.loading),s.Bb(3),s.lc("disabled",t.loading)}}const j=function(){return["/espacios/"]};function I(t,a){if(1&t&&(s.Ub(0,"mat-card",3),s.Ub(1,"mat-card-header"),s.Ub(2,"mat-card-title"),s.Ac(3),s.gc(4,"async"),s.Tb(),s.Tb(),s.Ub(5,"mat-card-content"),s.Ub(6,"div",4),s.Ub(7,"strong"),s.Ac(8,"Descripci\xf3n"),s.Tb(),s.Ub(9,"span"),s.Ac(10),s.gc(11,"async"),s.Tb(),s.Tb(),s.Pb(12,"mat-divider"),s.Ub(13,"div",4),s.Ub(14,"strong"),s.Ac(15,"Capacidad"),s.Tb(),s.Ub(16,"span"),s.Ac(17),s.gc(18,"async"),s.Tb(),s.Tb(),s.Pb(19,"mat-divider"),s.Ub(20,"div",4),s.Ub(21,"strong"),s.Ac(22,"Condici\xf3n"),s.Tb(),s.Ub(23,"span"),s.Ac(24),s.gc(25,"async"),s.Tb(),s.Tb(),s.Pb(26,"mat-divider"),s.yc(27,U,1,0,"div",5),s.gc(28,"async"),s.yc(29,A,33,16,"ng-template",null,6,s.zc),s.Tb(),s.Ub(31,"mat-card-actions"),s.Ub(32,"button",7),s.Ub(33,"mat-icon"),s.Ac(34,"arrow_back_ios"),s.Tb(),s.Tb(),s.yc(35,w,1,0,"div",5),s.yc(36,B,6,2,"ng-template",null,8,s.zc),s.Tb(),s.Tb()),2&t){const t=s.pc(30),a=s.pc(37),o=s.fc();var i,e,n,c,r;const l=null!=(null==(r=s.hc(28,17,o.espacio))?null:r.direccion);s.Bb(3),s.Bc(null==(i=s.hc(4,9,o.espacio))?null:i.nombre),s.Bb(7),s.Bc(null==(e=s.hc(11,11,o.espacio))?null:e.descripcion),s.Bb(7),s.Bc(null==(n=s.hc(18,13,o.espacio))?null:n.capacidad),s.Bb(7),s.Bc(null==(c=s.hc(25,15,o.espacio))?null:c.condicion),s.Bb(3),s.lc("ngIf",l)("ngIfThen",t),s.Bb(5),s.lc("routerLink",s.mc(19,j)),s.Bb(3),s.lc("ngIf",o.isAdmin())("ngIfThen",a)}}function C(t,a){1&t&&s.Pb(0,"mat-spinner")}function S(t,a){1&t&&(s.Ub(0,"h5"),s.Ac(1,"No se pudo cargar el espacio."),s.Tb())}function k(t,a){if(1&t&&(s.yc(0,C,1,0,"mat-spinner",12),s.yc(1,S,2,0,"h5",12)),2&t){const t=s.fc();s.lc("ngIf",t.loading),s.Bb(1),s.lc("ngIf",!t.loading)}}const E=[{path:"",component:(()=>{class t{constructor(t,a,i,e,c,r){this.authService=t,this.espacioServ=a,this.snackBar=i,this.dialog=e,this.router=c,this.route=r,this.espacioSubject=new n.a(null),this.espacio=this.espacioSubject.asObservable(),this.loading=!1,this.id=null,this.route.params.subscribe(t=>{this.id=parseInt(t.id)})}ngOnInit(){this.loading=!0,this.espacioServ.getEspacio(this.id).subscribe(t=>this.onSuccess(t),t=>this.onError(t),()=>this.loading=!1)}onSuccess(t){this.espacioSubject.next(t),this.loading=!1}onError(t){this.espacioSubject.next(null),this.loading=!1}onEdit(){let t=this.espacioSubject.value;null!=t&&this.dialog.open(r.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:c.a.editar,data:t}}).afterClosed().subscribe(t=>{let a=t;null!=a&&this.espacioServ.actualizarEspacio(a).subscribe(()=>{this.mostrarMensaje("Se ha editado correctamente el espacio "+a.nombre,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido actualizar el espacio "+a.nombre,"error")})})}onConfirmDelete(){this.dialog.open(o.a,{data:{titulo:"Confirmar Borrado",subtitulo:"Est\xe1 seguro que desea borrar el espacio?"}}).afterClosed().subscribe(t=>{t&&this.onDelete()})}onDelete(){let t=this.espacioSubject.value;null!=t&&(this.loading=!0,this.espacioServ.eliminarEspacio(t).subscribe(()=>{this.mostrarMensaje("Se ha dado de baja correctamente al espacio "+t.nombre,"success"),this.router.navigate(["/espacios"])},()=>{this.mostrarMensaje("No se ha podido dar de baja el espacio "+t.nombre,"error"),this.loading=!1},()=>{this.loading=!1}))}agregarEtiqueta(t){let a=this.espacioSubject.value;if(null!=a){let i=[...a.etiquetas];this.loading=!0,this.espacioServ.agregarEtiqueta(t,a).subscribe(()=>{this.mostrarMensaje("Se ha agregado la etiqueta "+t,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido agregar la etiqueta "+t,"error"),a.etiquetas=i,this.loading=!1},()=>{this.loading=!1})}}eliminarEtiqueta(t){let a=this.espacioSubject.value;null!=a&&(a.etiquetas=a.etiquetas.filter(a=>a.id!=t.id),this.loading=!0,this.espacioServ.actualizarEspacio(a).subscribe(()=>{this.mostrarMensaje("Se ha eliminado la etiqueta","success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido eliminar la etiqueta","error"),this.loading=!1},()=>{this.loading=!1}))}mostrarMensaje(t,a="",i=c.d,e="bottom"){this.snackBar.open(t,"",{duration:i,verticalPosition:e,panelClass:a})}isAdmin(){let t=this.authService.getUsuario();return null!=t&&t.rol==c.e.Administrador}}return t.\u0275fac=function(a){return new(a||t)(s.Ob(l.a),s.Ob(d.a),s.Ob(b.a),s.Ob(u.b),s.Ob(e.b),s.Ob(e.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-espacio"]],decls:6,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["ifBlock",""],["elseBlock",""],[1,"default-card"],[1,"card-row"],[4,"ngIf","ngIfThen"],["ifDireccionBlock",""],["mat-icon-button","","matTooltip","Volver","matTooltipPosition","below","aria-label","Volver",1,"row-profile-button",3,"routerLink"],["ifAdminBlock",""],[3,"etiquetas","loading","agregar","eliminar"],["mat-icon-button","","matTooltip","Editar Espacio","matTooltipPosition","below","aria-label","Editar Espacio",1,"row-profile-button",3,"disabled","click"],["mat-icon-button","","matTooltip","Eliminar Espacio","matTooltipPosition","below","aria-label","Eliminar Espacio",1,"row-profile-button",3,"disabled","click"],[4,"ngIf"]],template:function(t,a){if(1&t&&(s.yc(0,y,1,0,"div",0),s.gc(1,"async"),s.yc(2,I,38,20,"ng-template",null,1,s.zc),s.yc(4,k,2,2,"ng-template",null,2,s.zc)),2&t){const t=s.pc(3),i=s.pc(5);s.lc("ngIf",null!=s.hc(1,3,a.espacio))("ngIfThen",t)("ngIfElse",i)}},directives:[m.n,p.a,p.d,p.g,p.c,g.a,p.b,h.a,f.a,e.c,v.a,x.a,T.b],pipes:[m.b],styles:[""]}),t})()}];let q=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(a){return new(a||t)},imports:[[e.f.forChild(E)],e.f]}),t})();var P=i("ugYk"),O=i("zOQo");let M=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(a){return new(a||t)},providers:[],imports:[[q,P.a,O.a,m.c,p.e,g.b,v.b,h.b,u.f,f.b,b.b,T.a]]}),t})()},Wp6s:function(t,a,i){"use strict";i.d(a,"a",(function(){return p})),i.d(a,"b",(function(){return m})),i.d(a,"c",(function(){return d})),i.d(a,"d",(function(){return g})),i.d(a,"e",(function(){return h})),i.d(a,"f",(function(){return u})),i.d(a,"g",(function(){return b}));var e=i("R1ws"),n=i("FKr1"),c=i("fXoL");const r=["*",[["mat-card-footer"]]],o=["*","mat-card-footer"],s=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],l=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let d=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=c.Jb({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=c.Jb({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),u=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=c.Jb({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),t})(),m=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=c.Jb({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,a){2&t&&c.Fb("mat-card-actions-align-end","end"===a.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),p=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(a){return new(a||t)(c.Ob(e.a,8))},t.\u0275cmp=c.Ib({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,a){2&t&&c.Fb("_mat-animation-noopable","NoopAnimations"===a._animationMode)},exportAs:["matCard"],ngContentSelectors:o,decls:2,vars:0,template:function(t,a){1&t&&(c.kc(r),c.jc(0),c.jc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),g=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=c.Ib({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:l,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,a){1&t&&(c.kc(s),c.jc(0),c.Ub(1,"div",0),c.jc(2,1),c.Tb(),c.jc(3,2))},encapsulation:2,changeDetection:0}),t})(),h=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(a){return new(a||t)},imports:[[n.i],n.i]}),t})()},fCl4:function(t,a,i){"use strict";i.d(a,"a",(function(){return c}));var e=i("0IaG"),n=i("fXoL");let c=(()=>{class t{constructor(t,a){this.dialogRef=t,this.body=a,this.titulo=a.titulo,this.subtitulo=a.subtitulo}ngOnInit(){}}return t.\u0275fac=function(a){return new(a||t)(n.Ob(e.g),n.Ob(e.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-confirmar"]],decls:9,vars:4,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,a){1&t&&(n.Ub(0,"h4",0),n.Ac(1),n.Tb(),n.Ub(2,"mat-dialog-content"),n.Ac(3),n.Tb(),n.Ub(4,"mat-dialog-actions",1),n.Ub(5,"button",2),n.Ac(6,"No"),n.Tb(),n.Ub(7,"button",3),n.Ac(8,"S\xed"),n.Tb(),n.Tb()),2&t&&(n.Bb(1),n.Bc(a.titulo),n.Bb(2),n.Bc(a.subtitulo),n.Bb(2),n.lc("mat-dialog-close",!1),n.Bb(2),n.lc("mat-dialog-close",!0))},directives:[e.h,e.e,e.c,e.d],styles:[""]}),t})()}}]);