(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{pGLn:function(i,t,n){"use strict";n.r(t),n.d(t,"EdicionModule",(function(){return P}));var e=n("tyNb"),o=n("qR9t"),c=n("2Vo4"),a=n("MCLT"),s=n("nVpM"),r=n("9RAA"),l=n("fXoL"),b=n("lGQG"),d=n("S2lA"),u=n("/1K/"),h=n("dNgK"),g=n("0IaG"),m=n("ofXK"),p=n("Wp6s"),f=n("f0Cb"),S=n("ytFt"),T=n("bTqV"),v=n("Qu3c"),k=n("NFeN"),w=n("Xa2L");function y(i,t){1&i&&l.Ob(0,"div")}function j(i,t){1&i&&l.Ob(0,"div")}function E(i,t){if(1&i){const i=l.Ub();l.Tb(0,"button",9),l.ac("click",(function(){return l.rc(i),l.ec(2).onAddPhoto()})),l.Tb(1,"mat-icon"),l.zc(2,"add_a_photo"),l.Sb(),l.Sb(),l.Tb(3,"button",10),l.ac("click",(function(){return l.rc(i),l.ec(2).onEdit()})),l.Tb(4,"mat-icon"),l.zc(5,"edit"),l.Sb(),l.Sb(),l.Tb(6,"button",11),l.ac("click",(function(){return l.rc(i),l.ec(2).onDelete()})),l.Tb(7,"mat-icon"),l.zc(8,"delete"),l.Sb(),l.Sb()}if(2&i){const i=l.ec(2);l.kc("disabled",i.loading),l.Bb(3),l.kc("disabled",i.loading),l.Bb(3),l.kc("disabled",i.loading)}}const I=function(){return["/ediciones/"]};function A(i,t){if(1&i&&(l.Tb(0,"mat-card",3),l.Tb(1,"mat-card-header"),l.Tb(2,"mat-card-title"),l.zc(3),l.fc(4,"async"),l.Sb(),l.Sb(),l.Tb(5,"mat-card-content"),l.Tb(6,"div",4),l.Tb(7,"strong"),l.zc(8,"Nombre"),l.Sb(),l.Tb(9,"span"),l.zc(10),l.fc(11,"async"),l.Sb(),l.Sb(),l.Ob(12,"mat-divider"),l.Tb(13,"div",4),l.Tb(14,"strong"),l.zc(15,"Descripci\xf3n"),l.Sb(),l.Tb(16,"span"),l.zc(17),l.fc(18,"async"),l.Sb(),l.Sb(),l.Ob(19,"mat-divider"),l.Tb(20,"div",4),l.Tb(21,"strong"),l.zc(22,"Desde"),l.Sb(),l.Tb(23,"span"),l.zc(24),l.fc(25,"date"),l.fc(26,"async"),l.Sb(),l.Sb(),l.Ob(27,"mat-divider"),l.Tb(28,"div",4),l.Tb(29,"strong"),l.zc(30,"Hasta"),l.Sb(),l.Tb(31,"span"),l.zc(32),l.fc(33,"date"),l.fc(34,"async"),l.Sb(),l.Sb(),l.Ob(35,"mat-divider"),l.Ob(36,"app-carrusel-imagenes",5),l.fc(37,"async"),l.Sb(),l.Tb(38,"mat-card-actions"),l.Tb(39,"button",6),l.Tb(40,"mat-icon"),l.zc(41,"arrow_back_ios"),l.Sb(),l.Sb(),l.xc(42,j,1,0,"div",7),l.xc(43,E,9,3,"ng-template",null,8,l.yc),l.Sb(),l.Sb()),2&i){const i=l.oc(44),t=l.ec();var n,e,o,c,a,s;const r=null==(s=l.gc(37,23,t.edicion))?null:s.fotos;l.Bb(3),l.Ac(null==(n=l.gc(4,9,t.edicion))?null:n.apodo),l.Bb(7),l.Ac(null==(e=l.gc(11,11,t.edicion))?null:e.nombre),l.Bb(7),l.Ac(null==(o=l.gc(18,13,t.edicion))?null:o.descripcion),l.Bb(7),l.Ac(l.gc(25,15,null==(c=l.gc(26,17,t.edicion))?null:c.desde)),l.Bb(8),l.Ac(l.gc(33,19,null==(a=l.gc(34,21,t.edicion))?null:a.hasta)),l.Bb(4),l.kc("slides",r),l.Bb(3),l.kc("routerLink",l.lc(25,I)),l.Bb(3),l.kc("ngIf",t.isAdmin())("ngIfThen",i)}}function x(i,t){1&i&&l.Ob(0,"mat-spinner")}function z(i,t){1&i&&(l.Tb(0,"h5"),l.zc(1,"No se pudo cargar la edici\xf3n."),l.Sb())}function B(i,t){if(1&i&&(l.xc(0,x,1,0,"mat-spinner",12),l.xc(1,z,2,0,"h5",12)),2&i){const i=l.ec();l.kc("ngIf",i.loading),l.Bb(1),l.kc("ngIf",!i.loading)}}const N=[{path:"",component:(()=>{class i{constructor(i,t,n,e,o,a,s){this.authService=i,this.edicionServ=t,this.archivoServ=n,this.snackBar=e,this.dialog=o,this.router=a,this.route=s,this.edicionSubject=new c.a(null),this.edicion=this.edicionSubject.asObservable(),this.loading=!1,this.id=null,this.route.params.subscribe(i=>{this.id=parseInt(i.id)})}ngOnInit(){this.loading=!0,this.edicionServ.getEdicion(this.id).subscribe(i=>this.onSuccess(i),i=>this.onError(i),()=>this.loading=!1)}onSuccess(i){this.edicionSubject.next(i),this.loading=!1}onError(i){this.edicionSubject.next(null),this.loading=!1}getFotos(){let i=this.edicionSubject.value;return null!=i&&Object(a.isArray)(i.fotos)?i.fotos:[]}onAddPhoto(){let i=this.edicionSubject.value;null!=i&&this.dialog.open(s.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:o.a.crear,path:"edicion",data:i}}).afterClosed().subscribe(i=>{this.ngOnInit()})}onEdit(){let i=this.edicionSubject.value;null!=i&&this.dialog.open(r.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:o.a.editar,data:i}}).afterClosed().subscribe(i=>{let t=i;null!=t&&this.edicionServ.actualizarEdicion(t).subscribe(()=>{this.mostrarMensaje("Se ha editado correctamente la edici\xf3n "+t.nombre,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido actualizar la edici\xf3n "+t.nombre,"error")})})}onDelete(){let i=this.edicionSubject.value;null!=i&&(this.loading=!0,this.edicionServ.eliminarEdicion(i).subscribe(()=>{this.mostrarMensaje("Se ha dado de baja correctamente la edici\xf3n "+i.nombre,"success"),this.router.navigate(["/ediciones"])},()=>{this.mostrarMensaje("No se ha podido dar de baja la edici\xf3n "+i.nombre,"error"),this.loading=!1},()=>{this.loading=!1}))}mostrarMensaje(i,t="",n=o.c,e="bottom"){this.snackBar.open(i,"",{duration:n,verticalPosition:e,panelClass:t})}isAdmin(){let i=this.authService.getUsuario();return null!=i&&i.rol==o.d.Administrador}}return i.\u0275fac=function(t){return new(t||i)(l.Nb(b.a),l.Nb(d.a),l.Nb(u.a),l.Nb(h.a),l.Nb(g.b),l.Nb(e.b),l.Nb(e.a))},i.\u0275cmp=l.Hb({type:i,selectors:[["app-edicion"]],decls:6,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["ifBlock",""],["elseBlock",""],[1,"default-card"],[1,"card-row"],[3,"slides"],["mat-icon-button","","matTooltip","Volver","matTooltipPosition","below","aria-label","Volver",1,"row-profile-button",3,"routerLink"],[4,"ngIf","ngIfThen"],["ifAdminBlock",""],["mat-icon-button","","matTooltip","Agregar Fotos","matTooltipPosition","below","aria-label","Agregar Fotos",1,"row-profile-button",3,"disabled","click"],["mat-icon-button","","matTooltip","Editar Edici\xf3n","matTooltipPosition","below","aria-label","Editar Edici\xf3n",1,"row-profile-button",3,"disabled","click"],["mat-icon-button","","matTooltip","Eliminar Edici\xf3n","matTooltipPosition","below","aria-label","Eliminar Edici\xf3n",1,"row-profile-button",3,"disabled","click"],[4,"ngIf"]],template:function(i,t){if(1&i&&(l.xc(0,y,1,0,"div",0),l.fc(1,"async"),l.xc(2,A,45,26,"ng-template",null,1,l.yc),l.xc(4,B,2,2,"ng-template",null,2,l.yc)),2&i){const i=l.oc(3),n=l.oc(5);l.kc("ngIf",null!=l.gc(1,3,t.edicion))("ngIfThen",i)("ngIfElse",n)}},directives:[m.n,p.a,p.d,p.h,p.c,f.a,S.a,p.b,T.a,v.a,e.c,k.a,w.b],pipes:[m.b,m.e],styles:[".mat-progress-spinner[_ngcontent-%COMP%]{margin-top:2em}app-carrusel-imagenes[_ngcontent-%COMP%]{margin-top:10px}"]}),i})()}];let O=(()=>{class i{}return i.\u0275mod=l.Lb({type:i}),i.\u0275inj=l.Kb({factory:function(t){return new(t||i)},imports:[[e.f.forChild(N)],e.f]}),i})();var M=n("ugYk");let P=(()=>{class i{}return i.\u0275mod=l.Lb({type:i}),i.\u0275inj=l.Kb({factory:function(t){return new(t||i)},providers:[],imports:[[O,M.a,m.c,p.f,f.b,k.b,T.b,g.f,v.b,h.b,w.a]]}),i})()}}]);