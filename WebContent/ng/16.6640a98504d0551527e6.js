(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"9RAA":function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var i=r("3Pt+"),o=r("0IaG"),a=r("fXoL"),c=r("XFpC"),n=r("kmnG"),s=r("qFsG"),l=r("ofXK"),d=r("iadO");function m(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"El campo debe tener al menos 2 caracteres "),a.Tb())}function b(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"El campo debe tener como m\xe1ximo 100 caracteres "),a.Tb())}function u(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"Campo requerido"),a.Tb())}function h(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"El campo debe tener como m\xe1ximo 150 caracteres "),a.Tb())}function f(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"Campo requerido"),a.Tb())}function p(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"Fecha no v\xe1lida"),a.Tb())}function g(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"Tiempo no v\xe1lido"),a.Tb())}function T(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"Campo requerido"),a.Tb())}function F(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"Fecha no v\xe1lida"),a.Tb())}function E(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"Tiempo no v\xe1lido"),a.Tb())}function y(e,t){1&e&&(a.Ub(0,"mat-error"),a.Ac(1,"Campo requerido"),a.Tb())}let S=(()=>{class e{constructor(e,t,r){this.dialogRef=e,this.actividadServ=t,this.body=r,this.edicion=null,this.edicionForm=new i.h({id:new i.e(null),nombre:new i.e(""),descripcion:new i.e(""),desde:new i.e(new Date),desdeTime:new i.e(""),hasta:new i.e(new Date),hastaTime:new i.e(""),actividades:new i.e([]),fotos:new i.e([])}),this.edicion=r.data,this.action=r.action,this.crearEdicionForm.id.setValue(this.edicion.id),this.crearEdicionForm.nombre.setValue(this.edicion.nombre),this.crearEdicionForm.descripcion.setValue(this.edicion.descripcion);let o=new Date(this.edicion.desde),a=`${String(o.getHours()).padStart(2,"0")}:${String(o.getMinutes()).padStart(2,"0")}`;this.crearEdicionForm.desde.setValue(o),this.crearEdicionForm.desdeTime.setValue(a);let c=new Date(this.edicion.hasta),n=`${String(c.getHours()).padStart(2,"0")}:${String(c.getMinutes()).padStart(2,"0")}`;this.crearEdicionForm.hasta.setValue(c),this.crearEdicionForm.hastaTime.setValue(n),this.crearEdicionForm.actividades.setValue(this.edicion.actividades),this.crearEdicionForm.fotos.setValue(this.edicion.fotos),this.crearEdicionForm.actividades.setValue(this.edicion.actividades)}onSubmit(){try{let e=this.crearEdicionForm.desde.value,t=this.crearEdicionForm.hasta.value,r=this.crearEdicionForm.desdeTime.value.split(":"),i=parseInt(r[0]),o=parseInt(r[1]),a=this.crearEdicionForm.hastaTime.value.split(":"),c=parseInt(a[0]),n=parseInt(a[1]);e.setHours(i,o),t.setHours(c,n),this.crearEdicionForm.desde.setValue(e),this.crearEdicionForm.hasta.setValue(t),this.edicionForm.removeControl("desdeTime"),this.edicionForm.removeControl("hastaTime")}catch(e){console.log("Error manejando tiempo y fechas"),console.log(e)}this.dialogRef.close(this.edicionForm.value)}clean(){this.edicionForm.reset()}get crearEdicionForm(){return this.edicionForm.controls}compare(e,t){return null!=e&&null!=t&&e.id==t.id?e:null}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(o.g),a.Ob(c.a),a.Ob(o.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-form-edicion"]],decls:52,vars:18,consts:[[1,"dialog",3,"formGroup"],["matInput","","type","text","formControlName","nombre","autocomplete","off","maxlength","100","minlength","2","required",""],[4,"ngIf"],["matInput","","type","text","formControlName","descripcion","autocomplete","off","maxlength","150","required",""],["matInput","","type","text","formControlName","desde","autocomplete","off","readonly","","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["desdeF",""],["matInput","","formControlName","desdeTime","type","time","autocomplete","off","required",""],["matInput","","type","text","formControlName","hasta","autocomplete","off","readonly","","required","",3,"matDatepicker"],["hastaF",""],["matInput","","formControlName","hastaTime","type","time","autocomplete","off","required",""],["type","submit",1,"submit-button",3,"mat-dialog-close","disabled","click"]],template:function(e,t){if(1&e&&(a.Ub(0,"h4"),a.Ac(1,"Datos de la Edici\xf3n"),a.Tb(),a.Ub(2,"mat-dialog-content"),a.Ub(3,"form",0),a.Ub(4,"mat-form-field"),a.Ub(5,"mat-label"),a.Ac(6,"Nombre"),a.Tb(),a.Pb(7,"input",1),a.Ub(8,"mat-hint"),a.Ac(9,"Nombre"),a.Tb(),a.yc(10,m,2,0,"mat-error",2),a.yc(11,b,2,0,"mat-error",2),a.yc(12,u,2,0,"mat-error",2),a.Tb(),a.Ub(13,"mat-form-field"),a.Ub(14,"mat-label"),a.Ac(15,"Descripci\xf3n"),a.Tb(),a.Pb(16,"input",3),a.Ub(17,"mat-hint"),a.Ac(18,"Descripci\xf3n"),a.Tb(),a.yc(19,h,2,0,"mat-error",2),a.yc(20,f,2,0,"mat-error",2),a.Tb(),a.Ub(21,"mat-form-field"),a.Pb(22,"input",4),a.Pb(23,"mat-datepicker-toggle",5),a.Pb(24,"mat-datepicker",null,6),a.Ub(26,"mat-hint"),a.Ac(27,"Desde"),a.Tb(),a.yc(28,p,2,0,"mat-error",2),a.Tb(),a.Ub(29,"mat-form-field"),a.Pb(30,"input",7),a.Ub(31,"mat-hint"),a.Ac(32,"Desde (tiempo - hh:ss)"),a.Tb(),a.yc(33,g,2,0,"mat-error",2),a.yc(34,T,2,0,"mat-error",2),a.Tb(),a.Ub(35,"mat-form-field"),a.Pb(36,"input",8),a.Pb(37,"mat-datepicker-toggle",5),a.Pb(38,"mat-datepicker",null,9),a.Ub(40,"mat-hint"),a.Ac(41,"Hasta"),a.Tb(),a.yc(42,F,2,0,"mat-error",2),a.Tb(),a.Ub(43,"mat-form-field"),a.Pb(44,"input",10),a.Ub(45,"mat-hint"),a.Ac(46,"Hasta (tiempo - hh:ss)"),a.Tb(),a.yc(47,E,2,0,"mat-error",2),a.yc(48,y,2,0,"mat-error",2),a.Tb(),a.Tb(),a.Tb(),a.Ub(49,"mat-dialog-actions"),a.Ub(50,"button",11),a.bc("click",(function(){return t.onSubmit()})),a.Ac(51," Enviar "),a.Tb(),a.Tb()),2&e){const e=a.pc(25),r=a.pc(39);a.Bb(3),a.lc("formGroup",t.edicionForm),a.Bb(7),a.lc("ngIf",null==t.crearEdicionForm.nombre||null==t.crearEdicionForm.nombre.errors?null:t.crearEdicionForm.nombre.errors.minlength),a.Bb(1),a.lc("ngIf",null==t.crearEdicionForm.nombre||null==t.crearEdicionForm.nombre.errors?null:t.crearEdicionForm.nombre.errors.maxlength),a.Bb(1),a.lc("ngIf",null==t.crearEdicionForm.nombre||null==t.crearEdicionForm.nombre.errors?null:t.crearEdicionForm.nombre.errors.required),a.Bb(7),a.lc("ngIf",null==t.crearEdicionForm.descripcion||null==t.crearEdicionForm.descripcion.errors?null:t.crearEdicionForm.descripcion.errors.maxlength),a.Bb(1),a.lc("ngIf",null==t.crearEdicionForm.descripcion||null==t.crearEdicionForm.descripcion.errors?null:t.crearEdicionForm.descripcion.errors.required),a.Bb(2),a.lc("matDatepicker",e),a.Bb(1),a.lc("for",e),a.Bb(5),a.lc("ngIf",null==t.crearEdicionForm.desde||null==t.crearEdicionForm.desde.errors?null:t.crearEdicionForm.desde.errors.parse),a.Bb(5),a.lc("ngIf",null==t.crearEdicionForm.desdeTime||null==t.crearEdicionForm.desdeTime.errors?null:t.crearEdicionForm.desdeTime.errors.parse),a.Bb(1),a.lc("ngIf",null==t.crearEdicionForm.desdeTime||null==t.crearEdicionForm.desdeTime.errors?null:t.crearEdicionForm.desdeTime.errors.required),a.Bb(2),a.lc("matDatepicker",r),a.Bb(1),a.lc("for",r),a.Bb(5),a.lc("ngIf",null==t.crearEdicionForm.hasta||null==t.crearEdicionForm.hasta.errors?null:t.crearEdicionForm.hasta.errors.parse),a.Bb(5),a.lc("ngIf",null==t.crearEdicionForm.hastaTime||null==t.crearEdicionForm.hastaTime.errors?null:t.crearEdicionForm.hastaTime.errors.parse),a.Bb(1),a.lc("ngIf",null==t.crearEdicionForm.hastaTime||null==t.crearEdicionForm.hastaTime.errors?null:t.crearEdicionForm.hastaTime.errors.required),a.Bb(2),a.lc("mat-dialog-close",t.edicion)("disabled",t.edicionForm.invalid)}},directives:[o.e,i.y,i.r,i.i,n.c,n.g,s.b,i.b,i.q,i.g,i.l,i.m,i.w,n.f,l.n,d.b,d.d,n.h,d.a,o.c,o.d,n.b],styles:[""]}),e})()},Ohho:function(e,t,r){"use strict";r.r(t),r.d(t,"EdicionesModule",(function(){return $}));var i=r("tyNb"),o=r("M9IT"),a=r("+0xr"),c=r("2Vo4"),n=r("qR9t"),s=r("9RAA"),l=r("Dh3D"),d=r("fXoL"),m=r("S2lA"),b=r("dNgK"),u=r("0IaG"),h=r("n3We"),f=r("ofXK"),p=r("bTqV"),g=r("Qu3c"),T=r("NFeN"),F=r("Xa2L");function E(e,t){1&e&&d.Pb(0,"div")}function y(e,t){1&e&&(d.Ub(0,"mat-header-cell"),d.Ub(1,"h2"),d.Ac(2,"Ediciones"),d.Tb(),d.Tb())}function S(e,t){if(1&e){const e=d.Vb();d.Ub(0,"mat-header-cell",18),d.Ub(1,"button",19),d.bc("click",(function(){return d.sc(e),d.fc(2).onCreate()})),d.Ub(2,"mat-icon"),d.Ac(3,"person_add_alt_1"),d.Tb(),d.Tb(),d.Tb()}}function w(e,t){1&e&&(d.Ub(0,"mat-header-cell",20),d.Ac(1,"Nombre"),d.Tb())}function C(e,t){if(1&e&&(d.Ub(0,"mat-cell"),d.Ac(1),d.Tb()),2&e){const e=t.$implicit;d.Bb(1),d.Bc(e.nombre)}}function U(e,t){1&e&&(d.Ub(0,"mat-header-cell",20),d.Ac(1,"Descripci\xf3n"),d.Tb())}function v(e,t){if(1&e&&(d.Ub(0,"mat-cell"),d.Ac(1),d.Tb()),2&e){const e=t.$implicit;d.Bb(1),d.Bc(e.descripcion)}}function D(e,t){1&e&&(d.Ub(0,"mat-header-cell",20),d.Ac(1,"Desde"),d.Tb())}function I(e,t){if(1&e&&(d.Ub(0,"mat-cell"),d.Ac(1),d.gc(2,"date"),d.Tb()),2&e){const e=t.$implicit;d.Bb(1),d.Bc(d.ic(2,1,e.desde,"short"))}}function A(e,t){1&e&&(d.Ub(0,"mat-header-cell"),d.Ac(1,"Hasta"),d.Tb())}function B(e,t){if(1&e&&(d.Ub(0,"mat-cell"),d.Ac(1),d.gc(2,"date"),d.Tb()),2&e){const e=t.$implicit;d.Bb(1),d.Bc(d.ic(2,1,e.hasta,"short"))}}function k(e,t){1&e&&d.Pb(0,"mat-header-row")}function O(e,t){1&e&&d.Pb(0,"mat-header-row")}const P=function(e){return["/ediciones/",e]};function x(e,t){1&e&&d.Pb(0,"mat-row",21),2&e&&d.lc("routerLink",d.nc(1,P,t.$implicit.id))}function R(e,t){if(1&e&&(d.Ub(0,"table",4),d.Sb(1,5),d.yc(2,y,3,0,"mat-header-cell",6),d.Rb(),d.Sb(3,7),d.yc(4,S,4,0,"mat-header-cell",8),d.Rb(),d.Sb(5,9),d.yc(6,w,2,0,"mat-header-cell",10),d.yc(7,C,2,1,"mat-cell",11),d.Rb(),d.Sb(8,12),d.yc(9,U,2,0,"mat-header-cell",10),d.yc(10,v,2,1,"mat-cell",11),d.Rb(),d.Sb(11,13),d.yc(12,D,2,0,"mat-header-cell",10),d.yc(13,I,3,4,"mat-cell",11),d.Rb(),d.Sb(14,14),d.yc(15,A,2,0,"mat-header-cell",6),d.yc(16,B,3,4,"mat-cell",11),d.Rb(),d.yc(17,k,1,0,"mat-header-row",15),d.yc(18,O,1,0,"mat-header-row",15),d.yc(19,x,1,3,"mat-row",16),d.Tb(),d.Pb(20,"mat-paginator",17)),2&e){const e=d.fc();d.lc("dataSource",e.dataSource),d.Bb(17),d.lc("matHeaderRowDef",e.displayTitleCol),d.Bb(1),d.lc("matHeaderRowDef",e.displayedColumns),d.Bb(1),d.lc("matRowDefColumns",e.displayedColumns),d.Bb(1),d.lc("pageSizeOptions",e.pageSizeOptions)}}function q(e,t){1&e&&d.Pb(0,"mat-spinner")}function N(e,t){if(1&e){const e=d.Vb();d.Ub(0,"div",24),d.Ub(1,"h3",25),d.Ac(2,"No hay ediciones."),d.Tb(),d.Ub(3,"button",26),d.bc("click",(function(){return d.sc(e),d.fc(2).onCreate()})),d.Ub(4,"mat-icon"),d.Ac(5,"person_add_alt_1"),d.Tb(),d.Tb(),d.Tb()}}function V(e,t){if(1&e&&(d.yc(0,q,1,0,"mat-spinner",22),d.yc(1,N,6,0,"div",23)),2&e){const e=d.fc();d.lc("ngIf",e.loading),d.Bb(1),d.lc("ngIf",!e.loading)}}const L=[{path:"",children:[{path:"",component:(()=>{class e{constructor(e,t,r,i){this.edicionServ=e,this.changeDetectorRef=t,this.snackBar=r,this.dialog=i,this.edicionesSubject=new c.a([]),this.loading=!1,this.pageSizeOptions=[5,10,20],this.displayTitleCol=["titulo","action"],this.displayedColumns=["nombre","descripcion","desde","hasta"],this.searchColumns=["nombre","descripcion","desde","hasta"],this.searchSelectedColumns=this.searchColumns,this.predicateFn=(e,t)=>{for(const[r,i]of Object.entries(e))if(this.searchSelectedColumns.includes(r)&&("string"==typeof i&&-1!=i.toLowerCase().indexOf(t)||"number"==typeof i&&-1!=i.toString().indexOf(t)))return!0;return!1},this.edicionesSubject.next([]),this.dataSource=new a.k([])}set matSort(e){this.dataSource.sort=e}ngOnInit(){this.loading=!0,this.edicionServ.getEdiciones().subscribe(e=>this.onSuccess(e),e=>this.onError(e),()=>this.loading=!1)}ngOnDestroy(){this.dataSource&&this.dataSource.disconnect()}onSuccess(e){this.edicionesSubject.next(e),this.changeDataSource(e),this.loading=!1}onError(e){this.edicionesSubject.next([]),this.dataSource&&this.dataSource.disconnect(),this.loading=!1}changeDataSource(e){this.edicionesSubject.next(e),this.changeDetectorRef.detectChanges(),this.dataSource=new a.k(e),this.dataSource.paginator=this.paginator,this.edicionesObs=this.dataSource.connect(),this.dataSource.filterPredicate=this.predicateFn}onCreate(){let e={id:null,nombre:"",descripcion:"",desde:new Date,hasta:new Date,actividades:[],fotos:[]};this.dialog.open(s.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:n.a.crear,data:e}}).afterClosed().subscribe(e=>{let t=e;null!=t&&this.edicionServ.crearEdicion(t).subscribe(()=>{this.mostrarMensaje("Se ha creado correctamente la edici\xf3n "+t.nombre,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido crear la edici\xf3n "+t.nombre,"error")})})}onFilterSearch(e){this.searchSelectedColumns=e.campos,null!=this.dataSource.data&&this.dataSource.data.length>0&&(this.dataSource.filter=e.filtro.trim().toLowerCase())}mostrarMensaje(e,t="",r=n.d,i="bottom"){this.snackBar.open(e,"",{duration:r,verticalPosition:i,panelClass:t})}}return e.\u0275fac=function(t){return new(t||e)(d.Ob(m.a),d.Ob(d.h),d.Ob(b.a),d.Ob(u.b))},e.\u0275cmp=d.Ib({type:e,selectors:[["app-ediciones"]],viewQuery:function(e,t){var r;1&e&&(d.Gc(o.a,!0),d.Gc(l.a,!0)),2&e&&(d.oc(r=d.cc())&&(t.paginator=r.first),d.oc(r=d.cc())&&(t.matSort=r.first))},decls:7,vars:6,consts:[[3,"searchFields","filterSearch"],[4,"ngIf","ngIfThen","ngIfElse"],["ifBlock",""],["elseBlock",""],["mat-table","","multiTemplateDataRows","","matSort","",1,"edicion-table","mat-elevation-z8",3,"dataSource"],["matColumnDef","titulo"],[4,"matHeaderCellDef"],["matColumnDef","action"],["class","add-cell",4,"matHeaderCellDef"],["matColumnDef","nombre"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","desde"],["matColumnDef","hasta"],[4,"matHeaderRowDef"],["class","click-row",3,"routerLink",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"add-cell"],["mat-mini-fab","","color","primary","matTooltip","Crear Edici\xf3n","matTooltipPosition","above","aria-label","Crear Edici\xf3n",1,"fab-button",3,"click"],["mat-sort-header",""],[1,"click-row",3,"routerLink"],[4,"ngIf"],["class","no-edicion",4,"ngIf"],[1,"no-edicion"],["matLine",""],["color","primary","mat-mini-fab","","aria-label","Crear Edici\xf3n",3,"click"]],template:function(e,t){if(1&e&&(d.Ub(0,"app-filtro-tabla",0),d.bc("filterSearch",(function(e){return t.onFilterSearch(e)})),d.Tb(),d.yc(1,E,1,0,"div",1),d.gc(2,"async"),d.yc(3,R,21,5,"ng-template",null,2,d.zc),d.yc(5,V,2,2,"ng-template",null,3,d.zc)),2&e){const e=d.pc(4),i=d.pc(6);var r;const o=(null==(r=d.hc(2,4,t.edicionesObs))?null:r.length)>0;d.lc("searchFields",t.searchColumns),d.Bb(1),d.lc("ngIf",o)("ngIfThen",e)("ngIfElse",i)}},directives:[h.a,f.n,a.j,l.a,a.c,a.e,a.b,a.g,a.i,o.a,a.d,p.a,g.a,T.a,l.b,a.a,a.f,a.h,i.c,F.b],pipes:[f.b,f.e],styles:[".no-edicion[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%}.mat-progress-spinner[_ngcontent-%COMP%]{margin-top:2em}"]}),e})(),pathMatch:"full"},{path:":id",loadChildren:()=>Promise.all([r.e(3),r.e(23)]).then(r.bind(null,"pGLn")).then(e=>e.EdicionModule),pathMatch:"full",canLoad:[r("I8kz").a],data:{allowedRoles:[n.e.Administrador]}}]}];let j=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},imports:[[i.f.forChild(L)],i.f]}),e})();var H=r("STbY"),M=r("3Pt+"),G=r("OLjN");let $=(()=>{class e{}return e.\u0275mod=d.Mb({type:e}),e.\u0275inj=d.Lb({factory:function(t){return new(t||e)},providers:[],imports:[[j,f.c,a.l,o.c,l.c,T.b,u.f,p.b,F.a,g.b,H.a,M.k,M.v,G.a]]}),e})()}}]);