(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{pGLn:function(i,t,n){"use strict";n.r(t),n.d(t,"EdicionModule",(function(){return L}));var e=n("tyNb"),o=n("qR9t"),c=n("2Vo4"),a=n("MCLT"),s=n("nVpM"),r=n("9RAA"),l=n("fCl4"),b=n("fXoL"),d=n("lGQG"),u=n("S2lA"),h=n("/1K/"),m=n("dNgK"),g=n("0IaG"),p=n("ofXK"),f=n("Wp6s"),T=n("f0Cb"),v=n("ytFt"),U=n("bTqV"),A=n("Qu3c"),y=n("NFeN"),B=n("Xa2L");function w(i,t){1&i&&b.Pb(0,"div")}function S(i,t){1&i&&b.Pb(0,"div")}function E(i,t){if(1&i){const i=b.Vb();b.Ub(0,"button",9),b.bc("click",(function(){return b.sc(i),b.fc(2).onAddPhoto()})),b.Ub(1,"mat-icon"),b.Ac(2,"add_a_photo"),b.Tb(),b.Tb(),b.Ub(3,"button",10),b.bc("click",(function(){return b.sc(i),b.fc(2).onEdit()})),b.Ub(4,"mat-icon"),b.Ac(5,"edit"),b.Tb(),b.Tb(),b.Ub(6,"button",11),b.bc("click",(function(){return b.sc(i),b.fc(2).onConfirmDelete()})),b.Ub(7,"mat-icon"),b.Ac(8,"delete"),b.Tb(),b.Tb()}if(2&i){const i=b.fc(2);b.lc("disabled",i.loading),b.Bb(3),b.lc("disabled",i.loading),b.Bb(3),b.lc("disabled",i.loading)}}const I=function(){return["/ediciones/"]};function j(i,t){if(1&i&&(b.Ub(0,"mat-card",3),b.Ub(1,"mat-card-header"),b.Ub(2,"mat-card-title"),b.Ac(3),b.gc(4,"async"),b.Tb(),b.Tb(),b.Ub(5,"mat-card-content"),b.Ub(6,"div",4),b.Ub(7,"strong"),b.Ac(8,"Nombre"),b.Tb(),b.Ub(9,"span"),b.Ac(10),b.gc(11,"async"),b.Tb(),b.Tb(),b.Pb(12,"mat-divider"),b.Ub(13,"div",4),b.Ub(14,"strong"),b.Ac(15,"Descripci\xf3n"),b.Tb(),b.Ub(16,"span"),b.Ac(17),b.gc(18,"async"),b.Tb(),b.Tb(),b.Pb(19,"mat-divider"),b.Ub(20,"div",4),b.Ub(21,"strong"),b.Ac(22,"Desde"),b.Tb(),b.Ub(23,"span"),b.Ac(24),b.gc(25,"date"),b.gc(26,"async"),b.Tb(),b.Tb(),b.Pb(27,"mat-divider"),b.Ub(28,"div",4),b.Ub(29,"strong"),b.Ac(30,"Hasta"),b.Tb(),b.Ub(31,"span"),b.Ac(32),b.gc(33,"date"),b.gc(34,"async"),b.Tb(),b.Tb(),b.Pb(35,"mat-divider"),b.Pb(36,"app-carrusel-imagenes",5),b.gc(37,"async"),b.Tb(),b.Ub(38,"mat-card-actions"),b.Ub(39,"button",6),b.Ub(40,"mat-icon"),b.Ac(41,"arrow_back_ios"),b.Tb(),b.Tb(),b.yc(42,S,1,0,"div",7),b.yc(43,E,9,3,"ng-template",null,8,b.zc),b.Tb(),b.Tb()),2&i){const i=b.pc(44),t=b.fc();var n,e,o,c,a,s;const r=null==(s=b.hc(37,25,t.edicion))?null:s.fotos;b.Bb(3),b.Bc(null==(n=b.hc(4,9,t.edicion))?null:n.apodo),b.Bb(7),b.Bc(null==(e=b.hc(11,11,t.edicion))?null:e.nombre),b.Bb(7),b.Bc(null==(o=b.hc(18,13,t.edicion))?null:o.descripcion),b.Bb(7),b.Bc(b.ic(25,15,null==(c=b.hc(26,18,t.edicion))?null:c.desde,"medium")),b.Bb(8),b.Bc(b.ic(33,20,null==(a=b.hc(34,23,t.edicion))?null:a.hasta,"medium")),b.Bb(4),b.lc("slides",r),b.Bb(3),b.lc("routerLink",b.mc(27,I)),b.Bb(3),b.lc("ngIf",t.isAdmin())("ngIfThen",i)}}function k(i,t){1&i&&b.Pb(0,"mat-spinner")}function P(i,t){1&i&&(b.Ub(0,"h5"),b.Ac(1,"No se pudo cargar la edici\xf3n."),b.Tb())}function O(i,t){if(1&i&&(b.yc(0,k,1,0,"mat-spinner",12),b.yc(1,P,2,0,"h5",12)),2&i){const i=b.fc();b.lc("ngIf",i.loading),b.Bb(1),b.lc("ngIf",!i.loading)}}const C=[{path:"",component:(()=>{class i{constructor(i,t,n,e,o,a,s){this.authService=i,this.edicionServ=t,this.archivoServ=n,this.snackBar=e,this.dialog=o,this.router=a,this.route=s,this.edicionSubject=new c.a(null),this.edicion=this.edicionSubject.asObservable(),this.loading=!1,this.id=null,this.route.params.subscribe(i=>{this.id=parseInt(i.id)})}ngOnInit(){this.loading=!0,this.edicionServ.getEdicion(this.id).subscribe(i=>this.onSuccess(i),i=>this.onError(i),()=>this.loading=!1)}onSuccess(i){this.edicionSubject.next(i),this.loading=!1}onError(i){this.edicionSubject.next(null),this.loading=!1}getFotos(){let i=this.edicionSubject.value;return null!=i&&Object(a.isArray)(i.fotos)?i.fotos:[]}onAddPhoto(){let i=this.edicionSubject.value;null!=i&&this.dialog.open(s.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:o.a.crear,path:"edicion",data:i}}).afterClosed().subscribe(i=>{this.ngOnInit()})}onEdit(){let i=this.edicionSubject.value;null!=i&&this.dialog.open(r.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:o.a.editar,data:i}}).afterClosed().subscribe(i=>{let t=i;null!=t&&this.edicionServ.actualizarEdicion(t).subscribe(()=>{this.mostrarMensaje("Se ha editado correctamente la edici\xf3n "+t.nombre,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido actualizar la edici\xf3n "+t.nombre,"error")})})}onConfirmDelete(){this.dialog.open(l.a,{data:{titulo:"Confirmar Borrado",subtitulo:"Est\xe1 seguro que desea borrar la edici\xf3n?"}}).afterClosed().subscribe(i=>{i&&this.onDelete()})}onDelete(){let i=this.edicionSubject.value;null!=i&&(this.loading=!0,this.edicionServ.eliminarEdicion(i).subscribe(()=>{this.mostrarMensaje("Se ha dado de baja correctamente la edici\xf3n "+i.nombre,"success"),this.router.navigate(["/ediciones"])},()=>{this.mostrarMensaje("No se ha podido dar de baja la edici\xf3n "+i.nombre,"error"),this.loading=!1},()=>{this.loading=!1}))}mostrarMensaje(i,t="",n=o.d,e="bottom"){this.snackBar.open(i,"",{duration:n,verticalPosition:e,panelClass:t})}isAdmin(){let i=this.authService.getUsuario();return null!=i&&i.rol==o.e.Administrador}}return i.\u0275fac=function(t){return new(t||i)(b.Ob(d.a),b.Ob(u.a),b.Ob(h.a),b.Ob(m.a),b.Ob(g.b),b.Ob(e.b),b.Ob(e.a))},i.\u0275cmp=b.Ib({type:i,selectors:[["app-edicion"]],decls:6,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["ifBlock",""],["elseBlock",""],[1,"default-card"],[1,"card-row"],[3,"slides"],["mat-icon-button","","matTooltip","Volver","matTooltipPosition","below","aria-label","Volver",1,"row-profile-button",3,"routerLink"],[4,"ngIf","ngIfThen"],["ifAdminBlock",""],["mat-icon-button","","matTooltip","Agregar Fotos","matTooltipPosition","below","aria-label","Agregar Fotos",1,"row-profile-button",3,"disabled","click"],["mat-icon-button","","matTooltip","Editar Edici\xf3n","matTooltipPosition","below","aria-label","Editar Edici\xf3n",1,"row-profile-button",3,"disabled","click"],["mat-icon-button","","matTooltip","Eliminar Edici\xf3n","matTooltipPosition","below","aria-label","Eliminar Edici\xf3n",1,"row-profile-button",3,"disabled","click"],[4,"ngIf"]],template:function(i,t){if(1&i&&(b.yc(0,w,1,0,"div",0),b.gc(1,"async"),b.yc(2,j,45,28,"ng-template",null,1,b.zc),b.yc(4,O,2,2,"ng-template",null,2,b.zc)),2&i){const i=b.pc(3),n=b.pc(5);b.lc("ngIf",null!=b.hc(1,3,t.edicion))("ngIfThen",i)("ngIfElse",n)}},directives:[p.n,f.a,f.d,f.g,f.c,T.a,v.a,f.b,U.a,A.a,e.c,y.a,B.b],pipes:[p.b,p.e],styles:[".mat-progress-spinner[_ngcontent-%COMP%]{margin-top:2em}app-carrusel-imagenes[_ngcontent-%COMP%]{margin-top:10px}"]}),i})()}];let M=(()=>{class i{}return i.\u0275mod=b.Mb({type:i}),i.\u0275inj=b.Lb({factory:function(t){return new(t||i)},imports:[[e.f.forChild(C)],e.f]}),i})();var x=n("ugYk");let L=(()=>{class i{}return i.\u0275mod=b.Mb({type:i}),i.\u0275inj=b.Lb({factory:function(t){return new(t||i)},providers:[],imports:[[M,x.a,p.c,f.e,T.b,y.b,U.b,g.f,A.b,m.b,B.a]]}),i})()}}]);