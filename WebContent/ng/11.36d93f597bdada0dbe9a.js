(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Owkd:function(t,a,i){"use strict";i.r(a),i.d(a,"ActividadModule",(function(){return X}));var c=i("tyNb"),n=i("qR9t"),e=i("2Vo4"),r=i("SZcd"),o=i("fCl4"),d=i("fXoL"),s=i("lGQG"),l=i("XFpC"),b=i("S2lA"),u=i("7B7A"),m=i("dXND"),h=i("dNgK"),p=i("0IaG"),g=i("ofXK"),f=i("Wp6s"),v=i("f0Cb"),x=i("bTqV"),T=i("Qu3c"),y=i("NFeN"),A=i("Xa2L");function U(t,a){1&t&&d.Pb(0,"div")}const S=function(t){return["/ediciones/",t]};function w(t,a){if(1&t&&(d.Ub(0,"div"),d.Ub(1,"div",4),d.Ub(2,"strong"),d.Ac(3,"Edici\xf3n"),d.Tb(),d.Tb(),d.Ub(4,"div",4),d.Ub(5,"a",9),d.gc(6,"async"),d.Ub(7,"span"),d.Ac(8),d.gc(9,"async"),d.Tb(),d.Tb(),d.Tb(),d.Pb(10,"mat-divider"),d.Tb()),2&t){const t=d.fc(2);var i;const a=d.nc(6,S,null==(i=d.hc(6,2,t.actividad))?null:i.edicion.id);var c;d.Bb(5),d.lc("routerLink",a),d.Bb(3),d.Bc(null==(c=d.hc(9,4,t.actividad))?null:c.edicion.nombre)}}const B=function(t){return["/espacios/",t]};function j(t,a){if(1&t&&(d.Ub(0,"div"),d.Ub(1,"div",4),d.Ub(2,"strong"),d.Ac(3,"Espacio"),d.Tb(),d.Tb(),d.Ub(4,"a",9),d.gc(5,"async"),d.Ub(6,"span"),d.Ac(7),d.gc(8,"async"),d.Tb(),d.Tb(),d.Pb(9,"mat-divider"),d.Tb()),2&t){const t=d.fc(2);var i;const a=d.nc(6,B,null==(i=d.hc(5,2,t.actividad))?null:i.espacio.id);var c;d.Bb(4),d.lc("routerLink",a),d.Bb(3),d.Bc(null==(c=d.hc(8,4,t.actividad))?null:c.espacio.nombre)}}const k=function(t){return["/obras/",t]};function I(t,a){if(1&t&&(d.Ub(0,"div"),d.Ub(1,"div",4),d.Ub(2,"strong"),d.Ac(3,"Obra"),d.Tb(),d.Tb(),d.Ub(4,"div",4),d.Ub(5,"a",9),d.gc(6,"async"),d.Ub(7,"span"),d.Ac(8),d.gc(9,"async"),d.Tb(),d.Tb(),d.Tb(),d.Pb(10,"mat-divider"),d.Tb()),2&t){const t=d.fc(2);var i;const a=d.nc(6,k,null==(i=d.hc(6,2,t.actividad))?null:i.obra.id);var c;d.Bb(5),d.lc("routerLink",a),d.Bb(3),d.Bc(null==(c=d.hc(9,4,t.actividad))?null:c.obra.nombre)}}function C(t,a){1&t&&d.Pb(0,"div")}function O(t,a){if(1&t){const t=d.Vb();d.Ub(0,"button",10),d.bc("click",(function(){return d.sc(t),d.fc(2).onEdit()})),d.Ub(1,"mat-icon"),d.Ac(2,"edit"),d.Tb(),d.Tb(),d.Ub(3,"button",11),d.bc("click",(function(){return d.sc(t),d.fc(2).onConfirmDelete()})),d.Ub(4,"mat-icon"),d.Ac(5,"delete"),d.Tb(),d.Tb()}if(2&t){const t=d.fc(2);d.lc("disabled",t.loading),d.Bb(3),d.lc("disabled",t.loading)}}const E=function(){return["/actividades/"]};function P(t,a){if(1&t&&(d.Ub(0,"mat-card",3),d.Ub(1,"mat-card-header"),d.Ub(2,"mat-card-title"),d.Ac(3),d.gc(4,"async"),d.Tb(),d.Tb(),d.Ub(5,"mat-card-content"),d.Ub(6,"div",4),d.Ub(7,"strong"),d.Ac(8,"Descripci\xf3n"),d.Tb(),d.Ub(9,"span"),d.Ac(10),d.gc(11,"async"),d.Tb(),d.Tb(),d.Pb(12,"mat-divider"),d.Ub(13,"div",4),d.Ub(14,"strong"),d.Ac(15,"Desde"),d.Tb(),d.Ub(16,"span"),d.Ac(17),d.gc(18,"date"),d.gc(19,"async"),d.Tb(),d.Tb(),d.Pb(20,"mat-divider"),d.Ub(21,"div",4),d.Ub(22,"strong"),d.Ac(23,"Hasta"),d.Tb(),d.Ub(24,"span"),d.Ac(25),d.gc(26,"date"),d.gc(27,"async"),d.Tb(),d.Tb(),d.Pb(28,"mat-divider"),d.Ub(29,"div",4),d.Ub(30,"strong"),d.Ac(31,"Entradas Vendidas"),d.Tb(),d.Ub(32,"span"),d.Ac(33),d.gc(34,"number"),d.gc(35,"async"),d.Tb(),d.Tb(),d.Pb(36,"mat-divider"),d.yc(37,w,11,8,"div",5),d.gc(38,"async"),d.yc(39,j,10,8,"div",5),d.gc(40,"async"),d.yc(41,I,11,8,"div",5),d.gc(42,"async"),d.Tb(),d.Ub(43,"mat-card-actions"),d.Ub(44,"button",6),d.Ub(45,"mat-icon"),d.Ac(46,"arrow_back_ios"),d.Tb(),d.Tb(),d.yc(47,C,1,0,"div",7),d.yc(48,O,6,2,"ng-template",null,8,d.zc),d.Tb(),d.Tb()),2&t){const t=d.pc(49),a=d.fc();var i,c,n,e,r,o;const b=null!=(null==(o=d.hc(38,29,a.actividad))?null:o.edicion);var s;const u=null!=(null==(s=d.hc(40,31,a.actividad))?null:s.espacio);var l;const m=null!=(null==(l=d.hc(42,33,a.actividad))?null:l.obra);d.Bb(3),d.Bc(null==(i=d.hc(4,11,a.actividad))?null:i.nombre),d.Bb(7),d.Bc(null==(c=d.hc(11,13,a.actividad))?null:c.descripcion),d.Bb(7),d.Bc(d.ic(18,15,null==(n=d.hc(19,18,a.actividad))?null:n.desde,"medium")),d.Bb(8),d.Bc(d.ic(26,20,null==(e=d.hc(27,23,a.actividad))?null:e.hasta,"medium")),d.Bb(8),d.Bc(d.hc(34,25,null==(r=d.hc(35,27,a.actividad))?null:r.entradasVendidas)),d.Bb(4),d.lc("ngIf",b),d.Bb(2),d.lc("ngIf",u),d.Bb(2),d.lc("ngIf",m),d.Bb(3),d.lc("routerLink",d.mc(35,E)),d.Bb(3),d.lc("ngIf",a.isAdmin())("ngIfThen",t)}}function L(t,a){1&t&&d.Pb(0,"mat-spinner")}function M(t,a){1&t&&(d.Ub(0,"h5"),d.Ac(1,"No se pudo cargar la actividad."),d.Tb())}function z(t,a){if(1&t&&(d.yc(0,L,1,0,"mat-spinner",5),d.yc(1,M,2,0,"h5",5)),2&t){const t=d.fc();d.lc("ngIf",t.loading),d.Bb(1),d.lc("ngIf",!t.loading)}}const N=[{path:"",component:(()=>{class t{constructor(t,a,i,c,n,r,o,d,s){this.authService=t,this.actividadServ=a,this.edicionServ=i,this.espacioServ=c,this.obraServ=n,this.snackBar=r,this.dialog=o,this.router=d,this.route=s,this.actividadSubject=new e.a(null),this.actividad=this.actividadSubject.asObservable(),this.espaciosSubject=new e.a([]),this.obrasSubject=new e.a([]),this.edicionesSubject=new e.a([]),this.loading=!1,this.id=null,this.route.params.subscribe(t=>{this.id=parseInt(t.id)}),this.edicionServ.getEdiciones().subscribe(t=>{this.edicionesSubject.next(t)},t=>{this.edicionesSubject.next([])}),this.espacioServ.getEspacios().subscribe(t=>{this.espaciosSubject.next(t)},t=>{this.espaciosSubject.next([])}),this.obraServ.getObras().subscribe(t=>{this.obrasSubject.next(t)},t=>{this.obrasSubject.next([])})}ngOnInit(){this.loading=!0,this.actividadServ.getActividad(this.id).subscribe(t=>this.onSuccess(t),t=>this.onError(t),()=>this.loading=!1)}onSuccess(t){null!=t&&(null!=t.obraId&&(t.obra=this.obrasSubject.value.find(a=>a.id==t.obraId)),null!=t.espacioId&&(t.espacio=this.espaciosSubject.value.find(a=>a.id==t.espacioId))),this.actividadSubject.next(t),this.loading=!1}onError(t){this.actividadSubject.next(null),this.loading=!1}onEdit(){let t=this.actividadSubject.value;null!=t&&this.dialog.open(r.a,{maxWidth:"550px",maxHeight:"100%",height:"auto",data:{action:n.a.editar,ediciones:this.edicionesSubject.value,espacios:this.espaciosSubject.value,obras:this.obrasSubject.value,data:t}}).afterClosed().subscribe(t=>{let a=t;null!=a&&this.actividadServ.actualizarActividad(a).subscribe(()=>{this.mostrarMensaje("Se ha editado correctamente la actividad "+a.nombre,"success"),this.ngOnInit()},()=>{this.mostrarMensaje("No se ha podido actualizar la actividad "+a.nombre,"error")})})}onConfirmDelete(){this.dialog.open(o.a,{data:{titulo:"Confirmar Borrado",subtitulo:"Est\xe1 seguro que desea borrar la actividad?"}}).afterClosed().subscribe(t=>{t&&this.onDelete()})}onDelete(){let t=this.actividadSubject.value;null!=t&&(this.loading=!0,this.actividadServ.eliminarActividad(t).subscribe(()=>{this.mostrarMensaje("Se ha dado de baja correctamente la actividad "+t.nombre,"success"),this.router.navigate(["/actividades"])},()=>{this.mostrarMensaje("No se ha podido dar de baja la actividad "+t.nombre,"error"),this.loading=!1},()=>{this.loading=!1}))}mostrarMensaje(t,a="",i=n.d,c="bottom"){this.snackBar.open(t,"",{duration:i,verticalPosition:c,panelClass:a})}isAdmin(){let t=this.authService.getUsuario();return null!=t&&t.rol==n.e.Administrador}}return t.\u0275fac=function(a){return new(a||t)(d.Ob(s.a),d.Ob(l.a),d.Ob(b.a),d.Ob(u.a),d.Ob(m.a),d.Ob(h.a),d.Ob(p.b),d.Ob(c.b),d.Ob(c.a))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-actividad"]],decls:6,vars:5,consts:[[4,"ngIf","ngIfThen","ngIfElse"],["ifBlock",""],["elseBlock",""],[1,"default-card"],[1,"card-row"],[4,"ngIf"],["mat-icon-button","","matTooltip","Volver","matTooltipPosition","below","aria-label","Volver",1,"row-profile-button",3,"routerLink"],[4,"ngIf","ngIfThen"],["ifAdminBlock",""],[1,"entidad",3,"routerLink"],["mat-icon-button","","matTooltip","Editar Actividad","matTooltipPosition","below","aria-label","Editar Actividad",1,"row-profile-button",3,"disabled","click"],["mat-icon-button","","matTooltip","Eliminar Actividad","matTooltipPosition","below","aria-label","Eliminar Actividad",1,"row-profile-button",3,"disabled","click"]],template:function(t,a){if(1&t&&(d.yc(0,U,1,0,"div",0),d.gc(1,"async"),d.yc(2,P,50,36,"ng-template",null,1,d.zc),d.yc(4,z,2,2,"ng-template",null,2,d.zc)),2&t){const t=d.pc(3),i=d.pc(5);d.lc("ngIf",null!=d.hc(1,3,a.actividad))("ngIfThen",t)("ngIfElse",i)}},directives:[g.n,f.a,f.d,f.g,f.c,v.a,f.b,x.a,T.a,c.c,y.a,c.e,A.b],pipes:[g.b,g.e,g.f],styles:[".mat-progress-spinner[_ngcontent-%COMP%]{margin-top:2em}"]}),t})()}];let D=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(a){return new(a||t)},imports:[[c.f.forChild(N)],c.f]}),t})();var V=i("ugYk");let X=(()=>{class t{}return t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({factory:function(a){return new(a||t)},providers:[],imports:[[D,V.a,g.c,f.e,v.b,y.b,x.b,p.f,T.b,h.b,A.a]]}),t})()},Wp6s:function(t,a,i){"use strict";i.d(a,"a",(function(){return h})),i.d(a,"b",(function(){return m})),i.d(a,"c",(function(){return l})),i.d(a,"d",(function(){return p})),i.d(a,"e",(function(){return g})),i.d(a,"f",(function(){return u})),i.d(a,"g",(function(){return b}));var c=i("R1ws"),n=i("FKr1"),e=i("fXoL");const r=["*",[["mat-card-footer"]]],o=["*","mat-card-footer"],d=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],s=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let l=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=e.Jb({type:t,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=e.Jb({type:t,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),t})(),u=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=e.Jb({type:t,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),t})(),m=(()=>{class t{constructor(){this.align="start"}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275dir=e.Jb({type:t,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,a){2&t&&e.Fb("mat-card-actions-align-end","end"===a.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),t})(),h=(()=>{class t{constructor(t){this._animationMode=t}}return t.\u0275fac=function(a){return new(a||t)(e.Ob(c.a,8))},t.\u0275cmp=e.Ib({type:t,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,a){2&t&&e.Fb("_mat-animation-noopable","NoopAnimations"===a._animationMode)},exportAs:["matCard"],ngContentSelectors:o,decls:2,vars:0,template:function(t,a){1&t&&(e.kc(r),e.jc(0),e.jc(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions .mat-button:first-child,.mat-card-actions .mat-raised-button:first-child,.mat-card-actions .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),t})(),p=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=e.Ib({type:t,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:s,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,a){1&t&&(e.kc(d),e.jc(0),e.Ub(1,"div",0),e.jc(2,1),e.Tb(),e.jc(3,2))},encapsulation:2,changeDetection:0}),t})(),g=(()=>{class t{}return t.\u0275mod=e.Mb({type:t}),t.\u0275inj=e.Lb({factory:function(a){return new(a||t)},imports:[[n.i],n.i]}),t})()},fCl4:function(t,a,i){"use strict";i.d(a,"a",(function(){return e}));var c=i("0IaG"),n=i("fXoL");let e=(()=>{class t{constructor(t,a){this.dialogRef=t,this.body=a,this.titulo=a.titulo,this.subtitulo=a.subtitulo}ngOnInit(){}}return t.\u0275fac=function(a){return new(a||t)(n.Ob(c.g),n.Ob(c.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-confirmar"]],decls:9,vars:4,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["mat-button","",3,"mat-dialog-close"]],template:function(t,a){1&t&&(n.Ub(0,"h4",0),n.Ac(1),n.Tb(),n.Ub(2,"mat-dialog-content"),n.Ac(3),n.Tb(),n.Ub(4,"mat-dialog-actions",1),n.Ub(5,"button",2),n.Ac(6,"No"),n.Tb(),n.Ub(7,"button",3),n.Ac(8,"S\xed"),n.Tb(),n.Tb()),2&t&&(n.Bb(1),n.Bc(a.titulo),n.Bb(2),n.Bc(a.subtitulo),n.Bb(2),n.lc("mat-dialog-close",!1),n.Bb(2),n.lc("mat-dialog-close",!0))},directives:[c.h,c.e,c.c,c.d],styles:[""]}),t})()}}]);